"use strict";(self.webpackChunkrus_anonym=self.webpackChunkrus_anonym||[]).push([[574],{9574:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var n=r(7294),a=r(6478),l=r(2954),o=r(3178),c=r(240),u=r(2986),i=r(7909),s=r(9323),m=r(657),d=r(4478),f=r(381),p=r.n(f);function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,l=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw a}}return l}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b={light:{current:{backgroundColor:"green",color:"white",padding:"3px",borderRadius:"3px"},invalid:{backgroundColor:"red",color:"white",padding:"3px",borderRadius:"3px"},valid:{color:"green"},default:{color:"black"}},dark:{current:{backgroundColor:"green",color:"white",padding:"3px",borderRadius:"3px"},invalid:{backgroundColor:"red",color:"white",padding:"3px",borderRadius:"3px"},valid:{color:"green"},default:{color:"white"}}},x=function(e){var t=e.value,r=e.status;return n.createElement("span",{style:b[i.a.theme][r]},t)},k=function(e){var t=e.split("").map((function(e){return{value:e,status:"default"}}));return t[0].status="current",t},w={ru:/^[ЁёА-я\s]/,en:/^[a-zA-Z\s]/},S=function(e,t){return e.date<t.date?1:-1},C=function(e,t){var r=e.cpm/e.errors,n=t.cpm/t.errors;return r>n?-1:r<n?1:e.cpm>t.cpm?-1:e.cpm<t.cpm?1:0},A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"load",value:function(){var e=localStorage.getItem("utils-speeedtype-history");return e?JSON.parse(e):[]}},{key:"save",value:function(e){return e.length>100&&(e.sort(S),e=e.slice(0,100)),localStorage.setItem("utils-speeedtype-history",JSON.stringify(e))}}],(r=null)&&E(t.prototype,r),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const I=(0,s.a)((function(){var e=g((0,n.useState)(),2),t=e[0],r=e[1],s=g((0,n.useState)(0),2),f=s[0],v=s[1],h=g((0,n.useState)(0),2),E=h[0],b=h[1],I=g((0,n.useState)(0),2),O=I[0],j=I[1],z=g((0,n.useState)(!1),2),R=z[0],D=z[1],L=g((0,n.useState)(A.load()),2),M=L[0],H=L[1],N=(0,d.a)("translation",{keyPrefix:"pages.utils.list.speedtype"}),W=N.t,Y=N.i18n,J=W("text"),P=g((0,n.useState)(k(J)),2),T=P[0],_=P[1],B=function(e){return n.createElement(a.h,{mode:"outline"},n.createElement(a.J,{disabled:!0,text:Y.t("languages.".concat(e.lang)),caption:p()(e.date).format("DD.MM.YYYY, HH:mm:ss")},n.createElement(a.z,{before:e.cpm<200?n.createElement(l.a,null):e.cpm<400?n.createElement(o.a,null):n.createElement(c.a,null),textWrap:"short"},W("cpm"),": ",e.cpm),n.createElement(a.z,{before:n.createElement(u.a,{fill:"rgb(".concat(150+e.errors,", ").concat(162-8.1*e.errors,", ").concat(173-8.65*e.errors,")")}),textWrap:"short"},W("errors"),": ",e.errors)))},F=function(){v(0),b(0),j(0),_(k(J))},U=function(e){e.preventDefault(),(R||e.key===J[0])&&(D(!0),function(e){if(w[i.a.language].test(e)){var l=T.findIndex((function(e){return"current"===e.status||"invalid"===e.status})),o=T[l];0===l&&"current"===o.status&&r(Date.now());var c=function(){var e=Math.floor(60/((Date.now()-t)/1e3/l));return isNaN(e)&&(e=0),e};if(e===o.value){if(o.status="valid",l+1===T.length){_([]),j(l/(T.length/100));var u=c();v(u);var s=[].concat(y(M),[{lang:i.a.language,cpm:u,errors:E,date:t}]);return H(s),A.save(s),void D(!1)}T[l+1].status="current"}else o.status="invalid",b(E+1);j(l/(T.length/100)),v(c()),_(y(T))}else m.a.popout=n.createElement(a.b,{actions:[{title:W("continue"),autoclose:!0,mode:"default"}],text:W("switchLayout"),onClose:function(){m.a.popout=null}})}(e.key))};return(0,n.useEffect)((function(){return document.addEventListener("keypress",U),function(){document.removeEventListener("keypress",U)}}),[f,t,E,M,O,R]),n.createElement(n.Fragment,null,n.createElement(a.r,null,T.length>0&&n.createElement(a.m,{onClick:function(){var e;null===(e=document.getElementById("input"))||void 0===e||e.focus()}},n.createElement(a.H,{value:O}),n.createElement(a.O,{size:28}),n.createElement("div",{style:{textAlign:"center"}},T.map(x))),n.createElement(a.r,{mode:"plain",header:n.createElement(a.s,null,W("results"))},n.createElement(a.z,{before:f<200?n.createElement(l.a,null):f<400?n.createElement(o.a,null):n.createElement(c.a,null),textWrap:"short"},W("cpm"),": ",f),n.createElement(a.z,{before:n.createElement(u.a,{fill:"rgb(".concat(150+E,", ").concat(162-8.1*E,", ").concat(173-8.65*E,")")}),textWrap:"short"},W("errors"),": ",E),0===T.length&&n.createElement(a.m,{style:{display:"flex",justifyContent:"center"}},n.createElement(a.f,{appearance:"positive",stretched:!0,size:"l",onClick:F},W("restart")))),M.length>0&&n.createElement(a.r,{mode:"plain"},n.createElement(a.r,{separator:"hide",mode:"plain",style:{textAlign:"center"},description:"".concat(W("formula"),": ").concat(W("cpm")," / ").concat(W("errors"))},n.createElement("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center"}},n.createElement(a.r,{style:{marginRight:M.length>1?"5px":void 0},separator:"hide",mode:"plain"},n.createElement(a.s,null,W("bestResult")),B(M.sort(C)[0])),M.length>1&&n.createElement(a.r,{style:{marginLeft:"5px"},separator:"hide",mode:"plain"},n.createElement(a.s,null,W("worstResult")),B(M.sort(C)[M.length-1])))),n.createElement(a.O,null),n.createElement(a.r,{mode:"plain",header:n.createElement(a.s,{aside:"".concat(W("total"),": ").concat(M.length)},W("history"))},n.createElement(a.g,null,M.sort(S).map(B))),n.createElement(a.O,null),n.createElement(a.L,null),n.createElement(a.M,{disabled:!0},n.createElement(a.f,{size:"m",mode:"destructive",onClick:function(){H([]),A.save([]),F()}},W("clearHistory"))))))}))}}]);