import{r as x}from"./flatbuffers-D7LPy-E9.js";import{r as A}from"./@openmeteo-8GVKheWj.js";var c={},w;function W(){if(w)return c;w=1;var d=c&&c.__awaiter||function(f,a,n,s){function l(r){return r instanceof n?r:new n(function(i){i(r)})}return new(n||(n=Promise))(function(r,i){function p(e){try{t(s.next(e))}catch(u){i(u)}}function o(e){try{t(s.throw(e))}catch(u){i(u)}}function t(e){e.done?r(e.value):l(e.value).then(p,o)}t((s=s.apply(f,a||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.fetchWeatherApi=R;const y=x,m=A(),_=f=>new Promise(a=>setTimeout(a,f));function b(f){return d(this,arguments,void 0,function*(a,n=3,s=.5,l=2,r={}){const i=[500,502,504],p=[400,429];let o=0,t=yield fetch(a,r);for(;i.includes(t.status);){if(o++,o>=n)throw new Error(t.statusText);const e=Math.min(s*Math.pow(2,o),l)*1e3;yield _(e),t=yield fetch(a,r)}if(p.includes(t.status)){const e=yield t.json();throw"reason"in e?new Error(e.reason):new Error(t.statusText)}return t})}function R(f,a){return d(this,arguments,void 0,function*(n,s,l=3,r=.2,i=2,p={}){const o=new URLSearchParams(s);o.set("format","flatbuffers");const t=yield b(`${n}?${o.toString()}`,l,r,i,p),e=new y.ByteBuffer(new Uint8Array(yield t.arrayBuffer())),u=[];let h=0;for(;h<e.capacity();){e.setPosition(h);const v=e.readInt32(e.position());u.push(m.WeatherApiResponse.getSizePrefixedRootAsWeatherApiResponse(e)),h+=v+4}return u})}return c}var q=W();export{q as l};
