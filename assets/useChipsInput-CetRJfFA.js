import{u as Z,r as i,j as c,R as de,b as ee,w as G,ag as pe,V as fe,aR as X,B as me,am as j,a6 as q,aT as he,a5 as Ce}from"./index-AWcCmRSM.js";import{a6 as _e,a7 as be,al as te,c as ve,v as xe,a3 as je,Y as Ne,am as ge,an as ye}from"./index-BGqKRUTb.js";import{a as Ee}from"./Search-BDLJWUI5.js";const Re="_host_16sjq_1",Ie="_removable_16sjq_12",ke="_content_16sjq_31",ze="_sizeYCompact_16sjq_45",Fe="_sizeYNone_16sjq_54",Oe="_remove_16sjq_68",Ye="_before_16sjq_80",Te="_after_16sjq_85",_={host:Re,in:"_in_16sjq_11",removable:Ie,content:ke,sizeYCompact:ze,sizeYNone:Fe,remove:Oe,before:Ye,after:Te},De={none:_.sizeYNone,compact:_.sizeYCompact},Le=({Component:e="span",value:s="",removable:r=!0,onRemove:n,removeLabel:d="Удалить",before:p,after:E,disabled:C,readOnly:b,children:v,className:O,onFocus:f,onBlur:h,...Y})=>{const{sizeY:R="none"}=Z(),{focusVisible:x,onFocus:l,onBlur:m}=_e(),T=be({focusVisible:x}),I=a=>{f&&f(a),l(a)},D=a=>{h&&h(a),m(a)},k=i.useCallback(a=>{n==null||n(a,s)},[n,s]);return c.jsxs(de,{...Y,Component:e,className:ee(_.host,R!=="regular"&&De[R],T,O),"aria-readonly":b,"aria-disabled":C,onFocus:C?void 0:I,onBlur:C?void 0:D,children:[c.jsxs("div",{className:_.in,children:[G(p)&&c.jsx("div",{className:_.before,children:p}),c.jsx(pe,{className:_.content,children:v}),G(E)&&c.jsx("div",{className:_.after,children:E})]}),!b&&r&&c.jsx("div",{className:_.removable,children:c.jsxs("button",{tabIndex:-1,disabled:C,className:_.remove,onClick:C?void 0:k,children:[c.jsxs(fe,{children:["  ",d," ",v]}),c.jsx(te,{})]})})]})},Ae=({className:e,onClick:s,...r})=>c.jsx(ve,{Component:"button",label:"Очистить поле",onKeyDown:X,type:"button",activeMode:"opacity",hoverMode:"opacity",...r,className:e,onClick:n=>{X(n),n.preventDefault(),s()},children:c.jsx(te,{})}),M=[],w="";function Be(e){return e.value}function Ve(e){return e.label}function qe(e,s){return{value:e,label:s}}function $e(e){const{label:s,...r}=e;return c.jsx(Le,{removable:!e.disabled,...r,children:s})}const se=e=>typeof e=="object"&&"value"in e,J=e=>e?e.value===w:!0,He=(e,s)=>{const r=se(e)?e.value:e;return s.findIndex(n=>n.value===r)},H=e=>{const s=e&&e.dataset.index;return typeof s=="string"?Number(s):-1},Me=e=>{const s=e&&e.dataset.value;return typeof s=="string"?s:-1},we=(e,s,r)=>{const n=r-1;switch(s){case"prev":const d=e-1;return d<0?n:d;case"next":const p=e+1;return p>n?0:p;case"last":return n;default:return-1}},Ke="_host_elnbd_1",Ue="_chip_elnbd_17",We="_el_elnbd_22",Pe="_hasPlaceholder_elnbd_68",Se="_sizeYCompact_elnbd_78",Ge="_sizeYNone_elnbd_83",F={host:Ke,chip:Ue,el:We,hasPlaceholder:Pe,sizeYCompact:Se,sizeYNone:Ge},Xe={none:F.sizeYNone,compact:F.sizeYCompact},tt=({getRootRef:e,style:s,className:r,before:n,after:d,status:p,mode:E,maxHeight:C,value:b=M,onAddChipOption:v,onRemoveChipOption:O,renderChip:f=$e,getRef:h,id:Y,inputValue:R=w,placeholder:x,disabled:l,readOnly:m,addOnBlur:T,onBlur:I,onInputChange:D,ClearButton:k=Ae,clearButtonShown:a,clearButtonTestId:N,onClear:L,...A})=>{const{sizeY:z="none"}=Z(),B=i.useId(),u=xe(h),g=i.useRef(null),y=b.length,K=y===0,[ne,U]=i.useState(0),ae=t=>{U(0),t.focus()},V=(t,o,ie)=>{const P=we(t,o,y),S=ie.querySelector(`[data-index="${P}"]`);S&&(U(P),S.focus())},W=(t,o)=>{!u.current||!g.current||(y>1?o===y-1?V(o,"prev",g.current):V(o,"next",g.current):ae(u.current),O(t))},oe=t=>{const o=t.target;if(!(t.defaultPrevented||!g.current||!me(o)))switch(t.key){case j.ENTER:{!m&&q(o,u.current)&&u.current&&!J(u.current)&&(t.preventDefault(),v(u.current.value));break}case j.DELETE:case j.BACKSPACE:{!m&&y>0&&(q(o,u.current)?t.key===j.BACKSPACE&&J(u.current)&&(t.preventDefault(),V(H(o),"last",g.current)):(t.preventDefault(),W(Me(o),H(o))));break}case j.ARROW_UP:case j.ARROW_LEFT:case j.ARROW_DOWN:case j.ARROW_RIGHT:{y!==0&&!q(o,u.current)&&(t.preventDefault(),V(H(o),he(t.key),g.current));break}}},ce=t=>{I&&I(t),T&&!t.defaultPrevented&&u.current&&v(u.current.value)},re=(t,o)=>{t.preventDefault(),t.stopPropagation(),W(o,He(o,b))},le=t=>{t.defaultPrevented||q(t.currentTarget,Ce(t.currentTarget))||u.current&&u.current.focus()},$=i.useMemo(()=>{if(a)return c.jsx(k,{onClick:L,disabled:l,"data-testid":N})},[k,a,N,l,L]),ue=i.useMemo(()=>{if($||d)return c.jsxs(c.Fragment,{children:[$,d]})},[d,$]);return c.jsx(je,{Component:"div",getRootRef:e,style:s,disabled:l,before:n,after:ue,status:p,mode:E,className:r,maxHeight:C,onClick:l?void 0:le,children:c.jsxs("div",{className:ee(F.host,z!=="regular"&&Xe[z],K&&F.hasPlaceholder),ref:g,role:"listbox","aria-orientation":"horizontal","aria-disabled":l,"aria-readonly":m,onKeyDown:l?void 0:oe,children:[b.map((t,o)=>c.jsx(i.Fragment,{children:f({Component:"div",value:t.value,label:t.label,disabled:t.disabled||l,readOnly:t.readOnly||m,className:F.chip,onRemove:re,"data-index":o,"data-value":t.value,tabIndex:ne===o?0:-1,role:"option","aria-selected":!0,"aria-posinset":o+1,"aria-setsize":y},t)},`${typeof t.value}-${t.value}`)),c.jsx(Ne,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:!1,...A,Component:"input",type:"text",id:Y||`chips-input-base-generated-id-${B}`,getRootRef:u,className:F.el,disabled:l,readOnly:m,placeholder:K?x:void 0,value:R,onChange:D,onBlur:ce})]})})},Je=(e,s="")=>{try{const r=e.value;e.value=s;const n=e._valueTracker;n&&n.setValue(r);const d=new Event("input",{bubbles:!0});e.dispatchEvent(d)}catch{}},Q=(e,s,r)=>e.map(n=>({...n,label:r(n),value:s(n)})),st=({value:e,defaultValue:s=M,onChange:r,getOptionLabel:n=Ve,getOptionValue:d=Be,getNewOptionData:p=qe,inputValue:E,defaultInputValue:C=w,onInputChange:b,disabled:v})=>{const[O,f]=ge({disabled:v,value:e?Q(e,d,n):void 0,defaultValue:Q(s,d,n),onChange:r}),h=i.useRef(null),[Y,R]=ye({disabled:v,value:E,defaultValue:C,onChange:b}),x=i.useCallback((a,N)=>{f(L=>{const A=se(a),z=A?p(a.value,a.label):p(a,typeof a=="string"?a:""),B=L.filter(u=>z.value!==u.value);return N===!0&&B.push(A?{...a,...z}:z),B})},[f,p]),l=i.useCallback(()=>{h.current&&Je(h.current,"")},[h]),m=i.useCallback(a=>x(a,!0),[x]),T=i.useCallback(a=>x(a,!1),[x]),I=i.useCallback(a=>{const N=a.trim();N&&(m(N),l())},[m,l]),D=i.useCallback(()=>{f(s)},[s,f]),k=i.useCallback(()=>{f(M),l()},[l,f]);return Ee(h,D),{value:O,addOption:m,addOptionFromInput:I,removeOption:T,inputRef:h,inputValue:Y,onInputChange:R,clearInput:l,clearOptions:k}};export{tt as C,w as D,Be as a,qe as b,M as c,Ve as g,$e as r,Q as t,st as u};
