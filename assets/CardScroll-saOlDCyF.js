import{m as q,j as r,R as D,b as W,V as Z,r as o,h as U,g as G}from"./index-DZDn4-4S.js";import{h as J,v as K,ap as Q}from"./index-BAelyBTV.js";var tt=q("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" /></g></symbol>',16,24);const et="_host_fksue_1",nt="_directionLeft_fksue_15",ot="_directionRight_fksue_16",rt="_directionUp_fksue_21",st="_directionDown_fksue_22",it="_icon_fksue_27",ct="_sizeS_fksue_37",lt="_sizeM_fksue_43",at="_defaultIcon_fksue_73",g={host:et,directionLeft:nt,directionRight:ot,directionUp:rt,directionDown:st,icon:it,sizeS:ct,sizeM:lt,defaultIcon:at},dt={s:g.sizeS,m:g.sizeM},ut={up:g.directionUp,right:g.directionRight,down:g.directionDown,left:g.directionLeft},ft={up:"Назад",right:"Вперед",down:"Вперед",left:"Назад"},ht=({size:t})=>{let e=tt;return t==="s"&&(e=J),r.jsx(e,{className:g.defaultIcon})},H=({size:t="m",offsetY:e,direction:s,label:i,children:_=r.jsx(ht,{size:t}),...l})=>{const w=i??ft[s];return r.jsxs(D,{Component:"button",type:"button",baseClassName:W(g.host,dt[t],ut[s]),...l,children:[w&&r.jsx(Z,{children:w}),r.jsx("span",{className:g.icon,style:e?{top:e}:void 0,children:_})]})};function _t(){const t=o.useRef(null),[e,s]=o.useState(void 0),[i,_]=o.useState(void 0),{window:l}=U();return G(()=>{if(!l||!t.current)return;const S=l.getComputedStyle(t.current);s(S.direction),_(S.writingMode)},[l]),[t,e,i]}function wt(t){return .5*(1-Math.cos(Math.PI*t))}const pt="_host_9wc9i_1",mt="_inWrapper_9wc9i_27",gt="_arrow_9wc9i_33",St="_withConstArrows_9wc9i_44",Ct="_arrowLeft_9wc9i_50",xt="_arrowRight_9wc9i_54",b={host:pt,in:"_in_9wc9i_12",inWrapper:mt,arrow:gt,withConstArrows:St,arrowLeft:Ct,arrowRight:xt};function O(){return performance&&performance.now?performance.now():Date.now()}function F(t){return t>0?Math.ceil(t):Math.floor(t)}const T=t=>F(t.scrollLeft),bt=250;function Lt({scrollElement:t,getScrollPosition:e,animationQueue:s,onScrollToEndBorder:i,onScrollEnd:_,onScrollStart:l,initialScrollWidth:w,scrollAnimationDuration:S,textDirection:c}){if(!t||!e)return;const f=(c==="ltr"?1:-1)*(w-t.offsetWidth);let C=T(t),h=e(C);l(),C*h<0&&(h=0),Math.abs(h)>=Math.abs(f)&&(i(),h=f);const k=O();(function a(){const L=O(),d=Math.min((L-k)/S,1),m=wt(d),R=C+(h-C)*m;t.scrollLeft=F(R);const p=c==="ltr"?Math.max(0,h):Math.min(0,h);if(T(t)!==p&&d!==1){requestAnimationFrame(a);return}_(),s.shift(),s.length>0&&s[0]()})()}const Rt=({children:t,getScrollToLeft:e,getScrollToRight:s,showArrows:i=!0,arrowSize:_="m",arrowOffsetY:l,scrollAnimationDuration:w=bt,getRef:S,scrollOnAnyWheel:c=!1,prevButtonTestId:f,nextButtonTestId:C,...h})=>{const[k,a]=o.useState(!1),[L,d]=o.useState(!1),[m,R]=_t(),p=R||"ltr",B=p==="ltr"?a:d,y=p==="ltr"?d:a,E=o.useRef(!1),u=K(S,m),z=o.useRef([]),I=Q(),j=o.useCallback(n=>{const x=u.current;z.current.push(()=>{var $;return Lt({scrollElement:x,getScrollPosition:n,animationQueue:z.current,onScrollToEndBorder:()=>y(!1),onScrollEnd:()=>E.current=!1,onScrollStart:()=>E.current=!0,initialScrollWidth:(($=x==null?void 0:x.firstElementChild)==null?void 0:$.scrollWidth)||0,scrollAnimationDuration:w,textDirection:p})}),z.current.length===1&&z.current[0]()},[u,w,p,y]),V=o.useCallback(()=>{j(e??(x=>x-u.current.offsetWidth))},[e,j,u]),X=o.useCallback(()=>{j(s??(x=>x+u.current.offsetWidth))},[s,j,u]),N=o.useCallback(()=>{if(i&&I&&u.current&&!E.current){const n=u.current;B(n.scrollLeft!==0),y(Math.abs(T(n))+n.offsetWidth<n.scrollWidth)}},[i,I,u,B,y]);o.useEffect(N,[N,t]);const P=o.useCallback(n=>{u.current.scrollBy({left:n.deltaX+n.deltaY,behavior:"auto"})},[u]),Y=o.useCallback(n=>{P(n),n.preventDefault()},[P]),A=o.useCallback(n=>{(n.deltaX||n.deltaY&&c)&&P(n)},[P,c]);return r.jsxs(D,{...h,baseClassName:W(b.host,"vkuiInternalHorizontalScroll",i==="always"&&b.withConstArrows),onMouseEnter:N,children:[i&&(I||I===void 0)&&k&&r.jsx(H,{"data-testid":f,size:_,offsetY:l,direction:"left","aria-hidden":!0,tabIndex:-1,className:W(b.arrow,b.arrowLeft),onClick:V,onWheel:A}),i&&(I||I===void 0)&&L&&r.jsx(H,{"data-testid":C,size:_,offsetY:l,direction:"right","aria-hidden":!0,tabIndex:-1,className:W(b.arrow,b.arrowRight),onClick:X,onWheel:A}),r.jsx("div",{className:b.in,ref:u,onScroll:N,onWheel:c?Y:void 0,children:r.jsx("div",{className:b.inWrapper,children:t})})]})},It="_host_ud7gc_1",Wt="_modeShadow_ud7gc_9",kt="_modeOutline_ud7gc_18",Mt="_modePlain_ud7gc_19",vt="_withBorder_ud7gc_23",M={host:It,modeShadow:Wt,modeOutline:kt,modePlain:Mt,withBorder:vt},Et=({mode:t="tint",Component:e="li",...s})=>{const i=t==="outline"||t==="outline-tint";return r.jsx(D,{...s,Component:e,baseClassName:W(M.host,t==="outline"&&M.modeOutline,t==="shadow"&&M.modeShadow,t==="plain"&&M.modePlain,i&&M.withBorder)})},yt="_host_1nbz3_1",zt="_gap_1nbz3_13",jt="_withPaddings_1nbz3_23",v={host:yt,in:"_in_1nbz3_7",gap:zt,withPaddings:jt},Nt={s:"vkuiInternalCardScroll--size-s",m:"vkuiInternalCardScroll--size-m",l:"vkuiInternalCardScroll--size-l"},Tt=({children:t,size:e="s",showArrows:s=!0,padding:i=!1,Component:_="ul",prevButtonTestId:l,nextButtonTestId:w,...S})=>{const c=o.useRef(null),f=o.useRef(null),{window:C}=U();function h(a){if(!c.current||!f.current)return a;const L=c.current.offsetWidth,d=[...c.current.children].findIndex(p=>p.offsetLeft+p.offsetWidth+parseInt(C.getComputedStyle(p).marginRight)-a>=0);if(d===-1)return a;if(d===0)return 0;const m=c.current.children[d],R=m.offsetLeft-(L-m.offsetWidth)+f.current.offsetWidth;return R<=2*f.current.offsetWidth?0:R}function k(a){if(!c.current||!f.current)return a;const L=c.current.offsetWidth,d=Array.prototype.find.call(c.current.children,m=>m.offsetLeft+m.offsetWidth-a>L);return d?d.offsetLeft-f.current.offsetWidth:a}return r.jsx(D,{...S,Component:_,baseClassName:W(v.host,"vkuiInternalCardScroll",e!==!1&&Nt[e],i&&v.withPaddings),children:r.jsx(Rt,{getScrollToLeft:h,getScrollToRight:k,showArrows:s,prevButtonTestId:l,nextButtonTestId:w,children:r.jsxs("div",{className:v.in,ref:c,children:[r.jsx("span",{className:v.gap,ref:f}),t,r.jsx("span",{className:v.gap})]})})})};export{Tt as C,Et as a};
