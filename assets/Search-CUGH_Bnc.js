import{m as Y,r as n,g as S,u as W,f as X,j as s,w as Z,b as F,ag as P,V,aC as ee,n as se}from"./index-C03CfOsF.js";import{w as ae,M as te,ao as oe,E as ne,I as E,B as M}from"./index-MCajRGIq.js";var le=Y("Icon16Clear","clear_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="clear_16"><path fill-rule="evenodd" d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0M4.563 4.564a.9.9 0 0 0 0 1.272L6.727 8l-2.164 2.164a.9.9 0 1 0 1.273 1.272L8 9.273l2.164 2.163a.9.9 0 0 0 1.272-1.272L9.273 8l2.163-2.164a.9.9 0 1 0-1.272-1.272L8 6.727 5.836 4.564a.9.9 0 0 0-1.273 0" clip-rule="evenodd" /></symbol>',16,16),ce=Y("Icon16SearchOutline","search_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="search_outline_16"><path fill="currentColor" d="M6.5 1a5.5 5.5 0 0 1 4.384 8.823l3.895 3.9a.75.75 0 0 1-1.061 1.06l-3.895-3.9A5.5 5.5 0 1 1 6.5 1m0 1.5a4 4 0 1 0 0 8 4 4 0 0 0 0-8" /></symbol>',16,16);const ie=(l=!1)=>{const[c,o]=n.useState(l),d=n.useCallback(()=>{o(!0)},[]),_=n.useCallback(()=>{o(!1)},[]),m=n.useCallback(()=>{o(i=>!i)},[]);return{value:c,setTrue:d,setFalse:_,toggle:m}},re=(l,c)=>{S(()=>{if(!l.current)return;const o=l.current.closest("form");if(o)return o.addEventListener("reset",c),()=>{o.removeEventListener("reset",c)}},[l,c])},ue="_host_aiwp5_1",de="_withPadding_aiwp5_10",_e="_sizeYCompact_aiwp5_19",fe="_sizeYNone_aiwp5_24",he="_field_aiwp5_29",me="_label_aiwp5_52",pe="_input_aiwp5_59",ve="_nativeInput_aiwp5_72",we="_hasAfter_aiwp5_107",xe="_disabled_aiwp5_112",be="_controls_aiwp5_132",Ce="_hasIcon_aiwp5_145",Ie="_hasValue_aiwp5_150",je="_icon_aiwp5_154",ye="_after_aiwp5_169",Be="_focused_aiwp5_182",ge="_afterTextClip_aiwp5_202",Ne="_findButton_aiwp5_209",e={host:ue,withPadding:de,sizeYCompact:_e,sizeYNone:fe,field:he,label:me,input:pe,nativeInput:ve,hasAfter:we,disabled:xe,controls:be,hasIcon:Ce,hasValue:Ie,icon:je,after:ye,focused:Be,afterTextClip:ge,findButton:Ne},Ve=({id:l,before:c=s.jsx(ce,{}),className:o,placeholder:d="Поиск",after:_="Отмена",getRef:m,icon:i,onIconClick:f,style:k,autoComplete:A="off",onChange:L,iconLabel:T,clearLabel:R="Очистить",noPadding:H,getRootRef:D,findButtonText:O="Найти",onFindButtonClick:b,...t})=>{const r=ae(m),{value:$,setTrue:p,setFalse:v}=ie(!1),q=n.useId(),C=l||`search-${q}`,[w,x]=n.useState(()=>!!(t.value||t.defaultValue)),G=a=>x(!!a.currentTarget.value),{sizeY:I="none"}=W(),{sizeY:j}=te(),y=X(),B=y==="ios"&&Z(_),J=a=>{p(),t.onFocus&&t.onFocus(a)},K=a=>{v(),t.onBlur&&t.onBlur(a)},h=n.useCallback(()=>{var N,z;const a=(N=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:N.set;a==null||a.call(r.current,"");const u=new Event("input",{bubbles:!0});(z=r.current)==null||z.dispatchEvent(u)},[r]),Q=n.useCallback(a=>f==null?void 0:f(a),[f]),U=n.useCallback(a=>{var u;a.preventDefault(),(u=r.current)==null||u.focus(),oe()&&h()},[r,h]);S(()=>{t.value!==void 0&&x(!!t.value)},[t.value]),re(r,()=>{x(!!t.defaultValue)});const g=(a,u={})=>s.jsxs(E,{hoverMode:"opacity",onPointerDown:Q,className:e.icon,onFocus:p,onBlur:v,onClick:se,...u,children:[s.jsx(V,{children:T}),a]});return s.jsxs("div",{className:F("vkuiInternalSearch",e.host,I==="none"&&e.sizeYNone,I==="compact"&&e.sizeYCompact,$&&e.focused,w&&e.hasValue,B&&e.hasAfter,i&&e.hasIcon,t.disabled&&e.disabled,!H&&e.withPadding,o),ref:D,style:k,children:[s.jsxs("div",{className:e.field,children:[s.jsx("label",{htmlFor:C,className:e.label,children:d}),s.jsxs("div",{className:e.input,children:[c,s.jsx(ne,{Component:"input",type:"search",level:"1",weight:"3",...t,id:C,placeholder:d,autoComplete:A,getRootRef:r,className:e.nativeInput,onFocus:J,onBlur:K,onChange:P(L,G)})]}),s.jsxs("div",{className:e.controls,children:[i&&(typeof i=="function"?i(g):g(i)),s.jsxs(E,{hoverMode:"opacity",onPointerDown:U,onClick:h,className:e.icon,tabIndex:w?void 0:-1,disabled:t.disabled,children:[s.jsx(V,{children:R}),y==="ios"?s.jsx(le,{}):s.jsx(ee,{})]}),j.compact&&b&&s.jsx(M,{mode:"primary",size:"m",className:F(e.findButton,j.compact.className),focusVisibleMode:"inside",onClick:b,tabIndex:w?void 0:-1,children:O})]})]}),B&&s.jsx("div",{className:e.after,children:s.jsx(M,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:h,onFocus:p,onBlur:v,children:s.jsx("span",{className:e.afterTextClip,children:_})})})]})};export{Ve as S,re as a,ie as u};
