import{m as Y,r as n,g as S,u as W,f as X,j as s,b as F,aC as Z,V,aB as P,w as ee,n as se}from"./index--yLn2Y_5.js";import{v as te,M as ae,ao as oe,E as ne,c as E,B as M}from"./index-l9Hy6CIs.js";var le=Y("Icon16Clear","clear_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="clear_16"><path fill-rule="evenodd" d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0M4.563 4.564a.9.9 0 0 0 0 1.272L6.727 8l-2.164 2.164a.9.9 0 1 0 1.273 1.272L8 9.273l2.164 2.163a.9.9 0 0 0 1.272-1.272L9.273 8l2.163-2.164a.9.9 0 1 0-1.272-1.272L8 6.727 5.836 4.564a.9.9 0 0 0-1.273 0" clip-rule="evenodd" /></symbol>',16,16),ce=Y("Icon16SearchOutline","search_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="search_outline_16"><path fill="currentColor" d="M6.5 1a5.5 5.5 0 0 1 4.384 8.823l3.895 3.9a.75.75 0 0 1-1.061 1.06l-3.895-3.9A5.5 5.5 0 1 1 6.5 1m0 1.5a4 4 0 1 0 0 8 4 4 0 0 0 0-8" /></symbol>',16,16);const ie=(l=!1)=>{const[c,o]=n.useState(l),d=n.useCallback(()=>{o(!0)},[]),h=n.useCallback(()=>{o(!1)},[]),m=n.useCallback(()=>{o(i=>!i)},[]);return{value:c,setTrue:d,setFalse:h,toggle:m}},re=(l,c)=>{S(()=>{if(!l.current)return;const o=l.current.closest("form");if(o)return o.addEventListener("reset",c),()=>{o.removeEventListener("reset",c)}},[l,c])},ue="_host_hhe22_1",de="_withPadding_hhe22_9",he="_sizeYCompact_hhe22_18",_e="_sizeYNone_hhe22_23",fe="_field_hhe22_28",me="_label_hhe22_51",ve="_input_hhe22_58",xe="_nativeInput_hhe22_71",be="_hasAfter_hhe22_106",pe="_disabled_hhe22_111",Ce="_controls_hhe22_131",Be="_hasIcon_hhe22_144",je="_hasValue_hhe22_149",we="_icon_hhe22_153",ye="_after_hhe22_168",Ie="_focused_hhe22_181",Ne="_afterTextClip_hhe22_201",ge="_findButton_hhe22_208",e={host:ue,withPadding:de,sizeYCompact:he,sizeYNone:_e,field:fe,label:me,input:ve,nativeInput:xe,hasAfter:be,disabled:pe,controls:Ce,hasIcon:Be,hasValue:je,icon:we,after:ye,focused:Ie,afterTextClip:Ne,findButton:ge},Ve=({id:l,before:c=s.jsx(ce,{}),className:o,placeholder:d="Поиск",after:h="Отмена",getRef:m,icon:i,onIconClick:_,style:k,autoComplete:A="off",onChange:L,iconLabel:T,clearLabel:R="Очистить",noPadding:H,getRootRef:D,findButtonText:O="Найти",onFindButtonClick:C,...a})=>{const r=te(m),{value:$,setTrue:v,setFalse:x}=ie(!1),q=n.useId(),B=l||`search-${q}`,[b,p]=n.useState(()=>!!(a.value||a.defaultValue)),G=t=>p(!!t.currentTarget.value),{sizeY:j="none"}=W(),{sizeY:w}=ae(),y=X(),I=y==="ios"&&ee(h),J=t=>{v(),a.onFocus&&a.onFocus(t)},K=t=>{x(),a.onBlur&&a.onBlur(t)},f=n.useCallback(()=>{var g,z;const t=(g=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:g.set;t==null||t.call(r.current,"");const u=new Event("input",{bubbles:!0});(z=r.current)==null||z.dispatchEvent(u)},[r]),Q=n.useCallback(t=>_==null?void 0:_(t),[_]),U=n.useCallback(t=>{var u;t.preventDefault(),(u=r.current)==null||u.focus(),oe()&&f()},[r,f]);S(()=>{a.value!==void 0&&p(!!a.value)},[a.value]),re(r,()=>{p(!!a.defaultValue)});const N=(t,u={})=>s.jsxs(E,{hoverMode:"opacity",onPointerDown:Q,className:e.icon,onFocus:v,onBlur:x,onClick:se,...u,children:[s.jsx(V,{children:T}),t]});return s.jsxs("div",{className:F("vkuiInternalSearch",e.host,j==="none"&&e.sizeYNone,j==="compact"&&e.sizeYCompact,$&&e.focused,b&&e.hasValue,I&&e.hasAfter,i&&e.hasIcon,a.disabled&&e.disabled,!H&&e.withPadding,o),ref:D,style:k,children:[s.jsxs("div",{className:e.field,children:[s.jsx("label",{htmlFor:B,className:e.label,children:d}),s.jsxs("div",{className:e.input,children:[c,s.jsx(ne,{Component:"input",type:"search",level:"1",weight:"3",...a,id:B,placeholder:d,autoComplete:A,getRootRef:r,className:e.nativeInput,onFocus:J,onBlur:K,onChange:Z(L,G)})]}),s.jsxs("div",{className:e.controls,children:[i&&(typeof i=="function"?i(N):N(i)),s.jsxs(E,{hoverMode:"opacity",onPointerDown:U,onClick:f,className:e.icon,tabIndex:b?void 0:-1,disabled:a.disabled,children:[s.jsx(V,{children:R}),y==="ios"?s.jsx(le,{}):s.jsx(P,{})]}),w.compact&&C&&s.jsx(M,{mode:"primary",size:"m",className:F(e.findButton,w.compact.className),focusVisibleMode:"inside",onClick:C,tabIndex:b?void 0:-1,children:O})]})]}),I&&s.jsx("div",{className:e.after,children:s.jsx(M,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:f,onFocus:v,onBlur:x,children:s.jsx("span",{className:e.afterTextClip,children:h})})})]})};export{Ve as S,re as a,ie as u};
