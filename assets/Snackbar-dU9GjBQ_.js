import{u as J,j as _,R as G,b as H,f as X,r as d,g as R,aW as Z}from"./index-BSa9nLCW.js";import{g as tt,at as et,au as x,ae as nt,x as ot,av as st,aw as rt,ax as at,B as ct,ay as ut}from"./index-C24b8zzd.js";import{u as it}from"./useCSSKeyframesAnimationController-BannXgg5.js";const lt="_body_ea9cy_1",dt="_sizeYRegular_ea9cy_21",_t="_sizeYNone_ea9cy_33",yt="_modeDark_ea9cy_45",mt="_before_ea9cy_49",ft="_after_ea9cy_54",ht="_content_ea9cy_59",pt="_contentText_ea9cy_66",xt="_contentSubtitle_ea9cy_76",Et="_layoutHorizontal_ea9cy_88",bt="_action_ea9cy_88",gt="_layoutVertical_ea9cy_94",Tt="_layoutNone_ea9cy_108",u={body:lt,sizeYRegular:dt,sizeYNone:_t,modeDark:yt,before:mt,after:ft,content:ht,contentText:pt,contentSubtitle:xt,layoutHorizontal:Et,action:bt,layoutVertical:gt,layoutNone:Tt},St={none:u.layoutNone,vertical:u.layoutVertical,horizontal:u.layoutHorizontal},kt={none:u.sizeYNone,regular:u.sizeYRegular};function U({layout:n,action:e,after:t,before:o,mode:a,subtitle:s,children:i,...E}){const{sizeY:g="none"}=J(),T=t||s?"vertical":"none";return _.jsxs(G,{...E,baseClassName:H(u.body,St[n||T],g!=="compact"&&kt[g],a==="dark"&&u.modeDark),children:[o&&_.jsx("div",{className:u.before,children:o}),_.jsxs("div",{className:u.content,children:[_.jsx(tt,{className:u.contentText,children:i}),s&&!e&&_.jsx(et,{className:u.contentSubtitle,children:s}),e&&!s&&_.jsx("div",{className:u.action,children:e})]}),t&&_.jsx("div",{className:u.after,children:t})]})}function Bt(n,e){if(e!==void 0)switch(n){case"top-start":case"top":case"top-end":return{top:e};case"bottom-start":case"bottom":case"bottom-end":return{bottom:e}}}function f(n,e){return e?-1*n:n}function Nt(n,e,t){return{shifted:!1,direction:null,isDesktop:t.smallTabletPlus.matches,x:0,y:0,width:n,height:e}}function zt(n,e,t,o=!1){if(e.isDesktop)n.endsWith("start")?e.x=o?x(t.x,0,e.width):x(t.x,-e.width,0):n.endsWith("end")&&(e.x=o?x(t.x,-e.width,0):x(t.x,0,e.width)),n.startsWith("bottom")&&(e.y=x(t.y,0,e.height));else if(n.startsWith("bottom")){e.x=t.x;const a=t.x<0?-1:null,s=t.x>0?1:null;e.direction=a||s}return n.startsWith("top")&&(e.y=x(t.y,-e.height,0)),e.shifted=!0,e}const W=200;function jt(n,e,t,o,a=!1){if(!e.shifted)return!1;const s={x:!1,y:!1},i={x:!1,y:!1};return e.isDesktop?(n.endsWith("start")?(s.x=f(t.x,a)<-t.width/2,i.x=f(t.x,a)<0?f(o.x,a)<f(-200,a):!1):n.endsWith("end")&&(s.x=f(t.x,a)>t.width/2,i.x=f(t.x,a)>0?f(o.x,a)>f(W,a):!1),n.startsWith("bottom")&&(s.y=t.y>t.height/2,i.y=t.y>0?o.y>W:!1)):n.startsWith("bottom")&&(s.x=t.x<-t.width/2||t.x>t.width/2,i.x=t.x<0&&o.x<-200||t.x>0&&o.x>W),n.startsWith("top")&&(s.y=t.y<-t.height/2,i.y=t.y<0?o.y<-200:!1),s.x||i.x||s.y||i.y}const wt="_host_h53sy_1",Wt="_ios_h53sy_21",vt="_rtl_h53sy_25",Mt="_placementTopStart_h53sy_29",Pt="_placementTop_h53sy_29",It="_placementTopEnd_h53sy_31",Yt="_placementBottomStart_h53sy_38",Ot="_placementBottomEnd_h53sy_44",At="_placementBottom_h53sy_38",Rt="_stateEnter_h53sy_154",Gt="_stateEntering_h53sy_155",Ht="_stateEntered_h53sy_166",Ut="_touched_h53sy_172",Vt="_stateExit_h53sy_176",Ft="_stateExiting_h53sy_177",r={host:wt,ios:Wt,rtl:vt,placementTopStart:Mt,placementTop:Pt,placementTopEnd:It,placementBottomStart:Yt,placementBottomEnd:Ot,placementBottom:At,in:"_in_h53sy_118",stateEnter:Rt,stateEntering:Gt,stateEntered:Ht,touched:Ut,stateExit:Vt,stateExiting:Ft},Lt={"top-start":r.placementTopStart,top:r.placementTop,"top-end":r.placementTopEnd,"bottom-start":r.placementBottomStart,bottom:r.placementBottom,"bottom-end":r.placementBottomEnd},$t={enter:r.stateEnter,entering:r.stateEntering,entered:r.stateEntered,exit:r.stateExit,exiting:r.stateExiting,exited:void 0},Ct=({placement:n="bottom-start",children:e,layout:t,action:o,before:a,after:s,duration:i=4e3,onActionClick:E,onClose:g,mode:T="default",subtitle:V,offsetY:F,getRootRef:L,...$})=>{const C=X(),[h,D]=d.useState(!0),[p,v]=d.useState(!1),N=nt()==="rtl",c=ot(L),M=st(c),P=d.useRef(null),m=d.useRef(null),l=d.useRef(null),S=d.useRef(null),I=d.useRef(void 0),K=rt(),[k,Q]=it(h?"enter":"exit",{onExited:g}),B=d.useCallback(()=>{S.current!==null&&(cancelAnimationFrame(S.current),S.current=null)},[]),z=d.useCallback((y,w,A)=>{S.current=requestAnimationFrame(()=>{c.current&&(y===null?c.current.style.removeProperty("--vkui_internal--snackbar_shift_x"):c.current.style.setProperty("--vkui_internal--snackbar_shift_x",`${y}px`),w===null?c.current.style.removeProperty("--vkui_internal--snackbar_shift_y"):c.current.style.setProperty("--vkui_internal--snackbar_shift_y",`${w}px`),A===null?c.current.style.removeProperty("--vkui_internal--snackbar_direction"):c.current.style.setProperty("--vkui_internal--snackbar_direction",`${A}`))})},[c]),b=d.useCallback(()=>{D(!1)},[]),q=y=>{b(),o&&(E==null||E(y))},Y=y=>{m.current=new ut,m.current.setStartCoords(y.nativeEvent),l.current=Nt(c.current.offsetWidth,c.current.offsetHeight,K),v(!0)},O=y=>{l.current&&m.current&&(m.current.setInitialTimeOnce(),m.current.setEndCoords(y.nativeEvent),l.current=zt(n,l.current,m.current.delta(),N),l.current.shifted&&z(l.current.x,l.current.y,l.current.direction))},j=()=>{p&&l.current&&m.current&&jt(n,l.current,Z(c.current,P.current),m.current.velocity(),N)&&b(),v(!1)};return R(function(){if(!(!h||M||p||k!=="entered"))return I.current=setTimeout(b,i),function(){clearTimeout(I.current)}},[h,M,p,k,b,i]),R(function(){p||(B(),l.current=null,m.current=null,h&&z(null,null,null))},[p,h,z,B]),d.useEffect(()=>B,[B]),at(h,b),k==="exited"?null:_.jsx(G,{...$,role:"presentation",baseClassName:H(r.host,C==="ios"&&r.ios,p&&r.touched,Lt[n],$t[k],N&&r.rtl),baseStyle:Bt(n,F),getRootRef:c,children:_.jsx("div",{role:"alert",className:r.in,ref:P,onTouchStart:Y,onTouchMove:O,onTouchEnd:j,onMouseDown:Y,onMouseMove:O,onMouseUp:j,onMouseLeave:j,...Q,children:_.jsx(U,{mode:T,layout:t,before:a,after:s,subtitle:V,action:o&&_.jsx(ct,{align:"left",mode:"link",appearance:T==="dark"?"overlay":"accent",size:"s",onClick:q,children:o}),children:e})})})};Ct.Basic=U;export{Ct as S};
