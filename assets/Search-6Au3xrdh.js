import{_ as M,j as e,S,b as Y,d as b,r,k as A,u as te,g as ae,x as oe,e as V,ai as ne,V as E,aE as le,n as ce}from"./index-DXObVkYb.js";import{ae as ie,y as re,O as de,aq as ue,K as he,I as R,B as k}from"./index-Dydb4pI3.js";const _e=a=>{var{width:c=16,height:o=16,viewBox:d="0 0 16 16",children:u,style:i,fill:n}=a,h=M(a,["width","height","viewBox","children","style","fill"]);return e.jsxs(S,Y(b({baseClassName:"vkuiIcon--clear_16",viewBox:d,width:c,height:o,style:n?b({color:n},i):i,fill:"currentColor"},h),{children:[u,e.jsx("path",{fillRule:"evenodd",d:"M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0M4.563 4.564a.9.9 0 0 0 0 1.272L6.727 8l-2.164 2.164a.9.9 0 1 0 1.273 1.272L8 9.273l2.164 2.163a.9.9 0 0 0 1.272-1.272L9.273 8l2.163-2.164a.9.9 0 1 0-1.272-1.272L8 6.727 5.836 4.564a.9.9 0 0 0-1.273 0",clipRule:"evenodd"})]}))},ve=a=>{var{width:c=16,height:o=16,viewBox:d="0 0 16 16",children:u,style:i,fill:n}=a,h=M(a,["width","height","viewBox","children","style","fill"]);return e.jsxs(S,Y(b({baseClassName:"vkuiIcon--search_outline_16",viewBox:d,width:c,height:o,style:n?b({color:n},i):i,fill:"none"},h),{children:[u,e.jsx("path",{fill:"currentColor",d:"M6.5 1a5.5 5.5 0 0 1 4.384 8.823l3.895 3.9a.75.75 0 0 1-1.061 1.06l-3.895-3.9A5.5 5.5 0 1 1 6.5 1m0 1.5a4 4 0 1 0 0 8 4 4 0 0 0 0-8"})]}))},fe=(a=!1)=>{const[c,o]=r.useState(a),d=r.useCallback(()=>{o(!0)},[]),u=r.useCallback(()=>{o(!1)},[]),i=r.useCallback(()=>{o(n=>!n)},[]);return{value:c,setTrue:d,setFalse:u,toggle:i}},be=(a,c)=>{A(()=>{if(!a.current)return;const o=a.current.closest("form");if(o)return o.addEventListener("reset",c),()=>{o.removeEventListener("reset",c)}},[a,c])},ye="_host_5yvb8_1",me="_rtl_5yvb8_11",xe="_withPadding_5yvb8_15",pe="_sizeYCompact_5yvb8_24",je="_sizeYNone_5yvb8_29",Ce="_field_5yvb8_34",Be="_label_5yvb8_57",we="_input_5yvb8_64",ge="_nativeInput_5yvb8_77",Ie="_hasAfter_5yvb8_112",Ne="_disabled_5yvb8_117",ze="_controls_5yvb8_137",Fe="_hasIcon_5yvb8_150",Ve="_hasValue_5yvb8_162",Ee="_icon_5yvb8_166",Re="_after_5yvb8_181",ke="_focused_5yvb8_194",Me="_afterTextClip_5yvb8_214",Se="_findButton_5yvb8_221",s={host:ye,rtl:me,withPadding:xe,sizeYCompact:pe,sizeYNone:je,field:Ce,label:Be,input:we,nativeInput:ge,hasAfter:Ie,disabled:Ne,controls:ze,hasIcon:Fe,hasValue:Ve,icon:Ee,after:Re,focused:ke,afterTextClip:Me,findButton:Se},Te=({id:a,before:c=e.jsx(ve,{}),className:o,placeholder:d="Поиск",after:u="Отмена",getRef:i,icon:n,onIconClick:h,style:L,autoComplete:T="off",onChange:D,iconLabel:H,clearLabel:O="Очистить",clearButtonTestId:q,noPadding:K,getRootRef:$,findButtonText:G="Найти",findButtonTestId:J,onFindButtonClick:j,...l})=>{const Q=ie()==="rtl",_=re(i),{value:U,setTrue:y,setFalse:m}=fe(!1),W=r.useId(),C=a||`search-${W}`,[x,p]=r.useState(()=>!!(l.value||l.defaultValue)),X=t=>p(!!t.currentTarget.value),{sizeY:B="none"}=te(),{sizeY:w}=de(),g=ae(),I=g==="ios"&&oe(u),Z=t=>{y(),l.onFocus&&l.onFocus(t)},P=t=>{m(),l.onBlur&&l.onBlur(t)},f=r.useCallback(()=>{var z,F;const t=(z=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:z.set;t==null||t.call(_.current,"");const v=new Event("input",{bubbles:!0});(F=_.current)==null||F.dispatchEvent(v)},[_]),ee=r.useCallback(t=>h==null?void 0:h(t),[h]),se=r.useCallback(t=>{var v;t.preventDefault(),(v=_.current)==null||v.focus(),ue()&&f()},[_,f]);A(()=>{l.value!==void 0&&p(!!l.value)},[l.value]),be(_,()=>{p(!!l.defaultValue)});const N=(t,v={})=>e.jsxs(R,{hoverMode:"opacity",onPointerDown:ee,className:s.icon,onFocus:y,onBlur:m,onClick:ce,...v,children:[e.jsx(E,{children:H}),t]});return e.jsxs("div",{className:V("vkuiInternalSearch",s.host,B==="none"&&s.sizeYNone,B==="compact"&&s.sizeYCompact,U&&s.focused,x&&s.hasValue,I&&s.hasAfter,n&&s.hasIcon,l.disabled&&s.disabled,!K&&s.withPadding,Q&&s.rtl,o),ref:$,style:L,children:[e.jsxs("div",{className:s.field,children:[e.jsx("label",{htmlFor:C,className:s.label,children:d}),e.jsxs("div",{className:s.input,children:[c,e.jsx(he,{Component:"input",type:"search",level:"1",weight:"3",...l,id:C,placeholder:d,autoComplete:T,getRootRef:_,className:s.nativeInput,onFocus:Z,onBlur:P,onChange:ne(D,X)})]}),e.jsxs("div",{className:s.controls,children:[n&&(typeof n=="function"?n(N):N(n)),e.jsxs(R,{hoverMode:"opacity",onPointerDown:se,onClick:f,className:s.icon,tabIndex:x?void 0:-1,disabled:l.disabled,"data-testid":q,children:[e.jsx(E,{children:O}),g==="ios"?e.jsx(_e,{}):e.jsx(le,{})]}),w.compact&&j&&e.jsx(k,{mode:"primary",size:"m",className:V(s.findButton,w.compact.className),focusVisibleMode:"inside",onClick:j,tabIndex:x?void 0:-1,"data-testid":J,children:G})]})]}),I&&e.jsx("div",{className:s.after,children:e.jsx(k,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:f,onFocus:y,onBlur:m,children:e.jsx("span",{className:s.afterTextClip,children:u})})})]})};export{Te as S,be as a,fe as u};
