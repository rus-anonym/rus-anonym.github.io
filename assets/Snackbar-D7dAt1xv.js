import{u as K,j as _,R as Y,b as O,g as Q,r as l,h as I,aX as X}from"./index-DIEGngBY.js";import{g as J,ap as Z,aq as S,t as tt,ar as et,as as nt,at as ot,B as st,au as rt}from"./index-AOrVUlUs.js";import{u as at}from"./useCSSKeyframesAnimationController-BCwjl7oc.js";const ct="_body_zztq9_1",it="_sizeYRegular_zztq9_19",ut="_sizeYNone_zztq9_29",lt="_modeDark_zztq9_39",_t="_before_zztq9_43",dt="_after_zztq9_48",mt="_content_zztq9_53",ft="_contentText_zztq9_59",pt="_contentSubtitle_zztq9_69",yt="_layoutHorizontal_zztq9_81",ht="_action_zztq9_81",xt="_layoutVertical_zztq9_87",zt="_layoutNone_zztq9_101",bt="_layoutVerticalMq_zztq9_110",i={body:ct,sizeYRegular:it,sizeYNone:ut,modeDark:lt,before:_t,after:dt,content:mt,contentText:ft,contentSubtitle:pt,layoutHorizontal:yt,action:ht,layoutVertical:xt,layoutNone:zt,layoutVerticalMq:bt},Et={none:i.layoutNone,vertical:i.layoutVertical,horizontal:i.layoutHorizontal},gt={none:i.sizeYNone,regular:i.sizeYRegular};function V({layout:n,action:e,after:t,before:o,mode:a,subtitle:r,children:z,...h}){const{sizeY:b="none"}=K(),E=t||r?"vertical":"none";return _.jsxs(Y,{...h,baseClassName:O(i.body,Et[n||E],b!=="compact"&&gt[b],a==="dark"&&i.modeDark),children:[o&&_.jsx("div",{className:i.before,children:o}),_.jsxs("div",{className:i.content,children:[_.jsx(J,{className:i.contentText,children:z}),r&&!e&&_.jsx(Z,{className:i.contentSubtitle,children:r}),e&&!r&&_.jsx("div",{className:i.action,children:e})]}),t&&_.jsx("div",{className:i.after,children:t})]})}function Tt(n,e){if(e!==void 0)switch(n){case"top-start":case"top":case"top-end":return{top:e};case"bottom-start":case"bottom":case"bottom-end":return{bottom:e}}}function kt(n,e,t){return{shifted:!1,direction:null,isDesktop:t.smallTabletPlus.matches,x:0,y:0,width:n,height:e}}function St(n,e,t){if(e.isDesktop)n.endsWith("start")?e.x=S(t.x,-e.width,0):n.endsWith("end")&&(e.x=S(t.x,0,e.width)),n.startsWith("bottom")&&(e.y=S(t.y,0,e.height));else if(n.startsWith("bottom")){e.x=t.x;const o=t.x<0?-1:null,a=t.x>0?1:null;e.direction=o||a}return n.startsWith("top")&&(e.y=S(t.y,-e.height,0)),e.shifted=!0,e}const y=200;function Bt(n,e,t,o){if(!e.shifted)return!1;const a={x:!1,y:!1},r={x:!1,y:!1};return e.isDesktop?(n.endsWith("start")?(a.x=t.x<-t.width/2,r.x=t.x<0?o.x<-y:!1):n.endsWith("end")&&(a.x=t.x>t.width/2,r.x=t.x>0?o.x>y:!1),n.startsWith("bottom")&&(a.y=t.y>t.height/2,r.y=t.y>0?o.y>y:!1)):n.startsWith("bottom")&&(a.x=t.x<-t.width/2||t.x>t.width/2,r.x=t.x<0&&o.x<-y||t.x>0&&o.x>y),n.startsWith("top")&&(a.y=t.y<-t.height/2,r.y=t.y<0?o.y<-y:!1),a.x||r.x||a.y||r.y}const Nt="_host_n1z7r_1",qt="_ios_n1z7r_20",Mt="_placementTopStart_n1z7r_24",jt="_placementTop_n1z7r_24",Rt="_placementTopEnd_n1z7r_26",Pt="_placementBottomStart_n1z7r_33",Wt="_placementBottomEnd_n1z7r_37",vt="_placementBottom_n1z7r_33",wt="_stateEnter_n1z7r_137",It="_stateEntering_n1z7r_138",Yt="_stateEntered_n1z7r_149",Ot="_touched_n1z7r_155",Vt="_stateExit_n1z7r_159",At="_stateExiting_n1z7r_160",s={host:Nt,ios:qt,placementTopStart:Mt,placementTop:jt,placementTopEnd:Rt,placementBottomStart:Pt,placementBottomEnd:Wt,placementBottom:vt,in:"_in_n1z7r_101",stateEnter:wt,stateEntering:It,"animation-snackbar-slide-in":"_animation-snackbar-slide-in_n1z7r_1","animation-snackbar-fade-in":"_animation-snackbar-fade-in_n1z7r_1",stateEntered:Yt,touched:Ot,stateExit:Vt,stateExiting:At,"animation-snackbar-slide-out":"_animation-snackbar-slide-out_n1z7r_1","animation-snackbar-fade-out":"_animation-snackbar-fade-out_n1z7r_1"},Gt={"top-start":s.placementTopStart,top:s.placementTop,"top-end":s.placementTopEnd,"bottom-start":s.placementBottomStart,bottom:s.placementBottom,"bottom-end":s.placementBottomEnd},Ht={enter:s.stateEnter,entering:s.stateEntering,entered:s.stateEntered,exit:s.stateExit,exiting:s.stateExiting,exited:void 0},Ut=({placement:n="bottom-start",children:e,layout:t,action:o,before:a,after:r,duration:z=4e3,onActionClick:h,onClose:b,mode:E="default",subtitle:A,offsetY:G,getRootRef:H,...U})=>{const F=Q(),[f,L]=l.useState(!0),[p,M]=l.useState(!1),c=tt(H),j=et(c),R=l.useRef(null),m=l.useRef(null),u=l.useRef(null),g=l.useRef(null),P=l.useRef(),$=nt(),[T,D]=at(f?"enter":"exit",{onExited:b}),k=l.useCallback(()=>{g.current!==null&&(cancelAnimationFrame(g.current),g.current=null)},[]),B=l.useCallback((d,q,w)=>{g.current=requestAnimationFrame(()=>{c.current&&(d===null?c.current.style.removeProperty("--vkui_internal--snackbar_shift_x"):c.current.style.setProperty("--vkui_internal--snackbar_shift_x",`${d}px`),q===null?c.current.style.removeProperty("--vkui_internal--snackbar_shift_y"):c.current.style.setProperty("--vkui_internal--snackbar_shift_y",`${q}px`),w===null?c.current.style.removeProperty("--vkui_internal--snackbar_direction"):c.current.style.setProperty("--vkui_internal--snackbar_direction",`${w}`))})},[c]),x=l.useCallback(()=>{L(!1)},[]),C=d=>{x(),o&&(h==null||h(d))},W=d=>{m.current=new rt,m.current.setStartCoords(d.nativeEvent),u.current=kt(c.current.offsetWidth,c.current.offsetHeight,$),M(!0)},v=d=>{u.current&&m.current&&(m.current.setInitialTimeOnce(),m.current.setEndCoords(d.nativeEvent),u.current=St(n,u.current,m.current.delta()),u.current.shifted&&B(u.current.x,u.current.y,u.current.direction))},N=()=>{p&&u.current&&m.current&&Bt(n,u.current,X(c.current,R.current),m.current.velocity())&&x(),M(!1)};return I(function(){if(!(!f||j||p||T!=="entered"))return P.current=setTimeout(x,z),function(){clearTimeout(P.current)}},[f,j,p,T,x,z]),I(function(){p||(k(),u.current=null,m.current=null,f&&B(null,null,null))},[p,f,B,k]),l.useEffect(()=>k,[k]),ot(f,x),T==="exited"?null:_.jsx(Y,{...U,role:"presentation",baseClassName:O(s.host,F==="ios"&&s.ios,p&&s.touched,Gt[n],Ht[T]),baseStyle:Tt(n,G),getRootRef:c,children:_.jsx("div",{role:"alert",className:s.in,ref:R,onTouchStart:W,onTouchMove:v,onTouchEnd:N,onMouseDown:W,onMouseMove:v,onMouseUp:N,onMouseLeave:N,...D,children:_.jsx(V,{mode:E,layout:t,before:a,after:r,subtitle:A,action:o&&_.jsx(st,{align:"left",mode:"link",appearance:E==="dark"?"overlay":"accent",size:"s",onClick:C,children:o}),children:e})})})};Ut.Basic=V;export{Ut as S};
