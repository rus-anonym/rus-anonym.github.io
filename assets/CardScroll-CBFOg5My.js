import{_ as Y,j as i,S as Z,b as G,d as H,R as T,e as y,V as J,r as _,B as K,k as Q,n as tt,l as et}from"./index-DXObVkYb.js";import{ae as O,h as nt,ar as ot,as as rt,y as st}from"./index-Dydb4pI3.js";const it=t=>{var{width:e=16,height:c=24,viewBox:l="0 0 16 24",children:p,style:u,fill:f}=t,w=Y(t,["width","height","viewBox","children","style","fill"]);return i.jsxs(Z,G(H({baseClassName:"vkuiIcon--chevron_24",viewBox:l,width:e,height:c,style:f?H({color:f},u):u},w),{children:[p,i.jsxs("g",{fill:"none",fillRule:"evenodd",children:[i.jsx("path",{d:"M0 0h16v24H0z"}),i.jsx("path",{fill:"currentColor",d:"M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z"})]})]}))},ct="_host_1tbo0_1",lt="_directionLeft_1tbo0_15",at="_directionRight_1tbo0_16",dt="_directionUp_1tbo0_21",ut="_directionDown_1tbo0_22",ft="_icon_1tbo0_27",ht="_sizeS_1tbo0_37",_t="_sizeM_1tbo0_43",pt="_rtl_1tbo0_73",wt="_defaultIcon_1tbo0_73",g={host:ct,directionLeft:lt,directionRight:at,directionUp:dt,directionDown:ut,icon:ft,sizeS:ht,sizeM:_t,rtl:pt,defaultIcon:wt},mt={s:g.sizeS,m:g.sizeM},St={up:g.directionUp,right:g.directionRight,down:g.directionDown,left:g.directionLeft},gt={up:"Назад",right:"Вперед",down:"Вперед",left:"Назад"},Ct=({size:t})=>{let e=it;return t==="s"&&(e=nt),i.jsx(e,{className:g.defaultIcon})},F=({size:t="m",offsetY:e,direction:c,label:l,children:p=i.jsx(Ct,{size:t}),...u})=>{const f=O(),w=l??gt[c];return i.jsxs(T,{Component:"button",type:"button",baseClassName:y(g.host,mt[t],St[c],f==="rtl"&&g.rtl),...u,children:[w&&i.jsx(J,{children:w}),i.jsx("span",{className:g.icon,style:e?{top:e}:void 0,children:p})]})};function xt(t=!0){const{hasPointer:e}=_.useContext(K);return!ot(!(t||e===void 0))||e!==void 0?e:rt}function bt(t){return .5*(1-Math.cos(Math.PI*t))}const vt="_host_2uxda_1",It="_rtl_2uxda_14",Lt="_inWrapper_2uxda_33",Rt="_arrow_2uxda_39",yt="_withConstArrows_2uxda_50",Wt="_arrowLeft_2uxda_56",jt="_arrowRight_2uxda_60",b={host:vt,rtl:It,in:"_in_2uxda_18",inWrapper:Lt,arrow:Rt,withConstArrows:yt,arrowLeft:Wt,arrowRight:jt};function U(){return performance&&performance.now?performance.now():Date.now()}function V(t){return t>0?Math.ceil(t):Math.floor(t)}const A=t=>V(t.scrollLeft),Mt=250;function Et({scrollElement:t,getScrollPosition:e,animationQueue:c,onScrollToEndBorder:l,onScrollEnd:p,onScrollStart:u,initialScrollWidth:f,scrollAnimationDuration:w,textDirection:n}){if(!t||!e)return;const L=(n==="ltr"?1:-1)*(f-t.offsetWidth),m=A(t),R=m*(n==="rtl"?-1:1);let a=e(R);const E=a-R;n==="rtl"&&(a=m-E),u(),m*a<0&&(a=0),Math.abs(a)>=Math.abs(L)&&(l(),a=L);const P=U();(function r(){const C=U(),d=Math.min((C-P)/w,1),S=bt(d),h=m+(a-m)*S;t.scrollLeft=V(h);const v=n==="ltr"?Math.max(0,a):Math.min(0,a);if(A(t)!==v&&d!==1){requestAnimationFrame(r);return}p(),c.shift(),c.length>0&&c[0]()})()}const Pt=({children:t,getScrollToLeft:e,getScrollToRight:c,showArrows:l=!0,arrowSize:p="m",arrowOffsetY:u,scrollAnimationDuration:f=Mt,getRef:w,scrollOnAnyWheel:n=!1,prevButtonTestId:L,nextButtonTestId:m,ContentWrapperComponent:R="div",contentWrapperRef:a,contentWrapperClassName:E,...P})=>{const[r,C]=_.useState(!1),[d,S]=_.useState(!1),h=O(),v=h==="rtl",W=_.useRef(!1),o=st(w),I=_.useRef([]),j=xt(),B=_.useCallback(x=>{const s=o.current;I.current.push(()=>{var z;return Et({scrollElement:s,getScrollPosition:x,animationQueue:I.current,onScrollToEndBorder:()=>S(!1),onScrollEnd:()=>W.current=!1,onScrollStart:()=>W.current=!0,initialScrollWidth:((z=s==null?void 0:s.firstElementChild)==null?void 0:z.scrollWidth)||0,scrollAnimationDuration:f,textDirection:h})}),I.current.length===1&&I.current[0]()},[o,f,h,S]),q=_.useCallback(()=>{B(e??(s=>s-o.current.offsetWidth))},[e,B,o]),X=_.useCallback(()=>{B(c??(s=>s+o.current.offsetWidth))},[c,B,o]),M=_.useCallback(()=>{if(l&&j&&o.current&&!W.current){const x=o.current,s=x.scrollLeft;C(v?s<0:s>0),S(Math.abs(A(x))+x.offsetWidth<x.scrollWidth)}},[l,j,o,v]);return _.useEffect(M,[M,t]),Q(function(){const s=o.current;if(!s)return tt;const z=D=>{o.current.scrollBy({left:D.deltaX+D.deltaY,behavior:"auto"}),D.preventDefault()},N={passive:!1};return n&&s.addEventListener("wheel",z,N),s.addEventListener("scroll",M,N),()=>{n&&s.removeEventListener("wheel",z,N),s.removeEventListener("scroll",M,N)}},[n,M,o]),i.jsxs(T,{...P,baseClassName:y(b.host,"vkuiInternalHorizontalScroll",l==="always"&&b.withConstArrows,v&&b.rtl),onMouseEnter:M,children:[l&&(j||j===void 0)&&r&&i.jsx(F,{"data-testid":L,size:p,offsetY:u,direction:"left","aria-hidden":!0,tabIndex:-1,className:y(b.arrow,b.arrowLeft),onClick:q}),l&&(j||j===void 0)&&d&&i.jsx(F,{"data-testid":m,size:p,offsetY:u,direction:"right","aria-hidden":!0,tabIndex:-1,className:y(b.arrow,b.arrowRight),onClick:X}),i.jsx("div",{className:b.in,ref:o,children:i.jsx(R,{className:y(b.inWrapper,E),ref:a,children:t})})]})},zt="_host_1p3lf_1",kt="_modeShadow_1p3lf_9",Bt="_modeOutline_1p3lf_18",Nt="_modePlain_1p3lf_19",Tt="_withBorder_1p3lf_23",k={host:zt,modeShadow:kt,modeOutline:Bt,modePlain:Nt,withBorder:Tt},Ft=({mode:t="tint",Component:e="li",...c})=>{const l=t==="outline"||t==="outline-tint";return i.jsx(T,{...c,Component:e,baseClassName:y(k.host,t==="outline"&&k.modeOutline,t==="shadow"&&k.modeShadow,t==="plain"&&k.modePlain,l&&k.withBorder)})},Dt="_host_f988t_1",$t="_withPaddings_f988t_23",$={host:Dt,in:"_in_f988t_5",withPaddings:$t},At={s:"vkuiInternalCardScroll--size-s",m:"vkuiInternalCardScroll--size-m",l:"vkuiInternalCardScroll--size-l"},Ut=({children:t,size:e="s",showArrows:c=!0,padding:l=!1,CardsListComponent:p="ul",prevButtonTestId:u,nextButtonTestId:f,...w})=>{const n=_.useRef(null),L=O(),{window:m}=et(),R=r=>parseFloat(m.getComputedStyle(r).getPropertyValue("--vkui_internal--CardScroll_horizontal_padding")),a=r=>{var d;const C=((d=n.current)==null?void 0:d.offsetWidth)||0;return L==="rtl"?C-r.offsetLeft-r.offsetWidth:r.offsetLeft};function E(r){if(!n.current)return r;const C=n.current.offsetWidth,d=o=>{const I=m.getComputedStyle(o);return parseInt(I.marginInlineEnd)||parseInt(L==="rtl"?I.marginLeft:I.marginRight)||0},S=[...n.current.children].findIndex(o=>a(o)+o.offsetWidth+d(o)-r>=0);if(S===-1)return r;const h=n.current.children[S],v=R(n.current),W=a(h)-(C-h.offsetWidth)+v;return W<=2*v?0:W}function P(r){if(!n.current)return r;const C=n.current.offsetWidth,d=Array.prototype.find.call(n.current.children,h=>a(h)+h.offsetWidth-r>C);if(!d)return r;const S=R(n.current);return a(d)-S}return i.jsx(T,{...w,baseClassName:y($.host,"vkuiInternalCardScroll",e!==!1&&At[e],l&&$.withPaddings),children:i.jsx(Pt,{getScrollToLeft:E,getScrollToRight:P,showArrows:c,prevButtonTestId:u,nextButtonTestId:f,ContentWrapperComponent:p,contentWrapperRef:n,contentWrapperClassName:$.in,children:t})})};export{Ut as C,Ft as a};
