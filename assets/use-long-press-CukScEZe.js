import{r as u}from"./react-hddbZszZ.js";var d=(e=>(e.Mouse="mouse",e.Touch="touch",e.Pointer="pointer",e))(d||{}),v=(e=>(e.CancelledByMovement="cancelled-by-movement",e.CancelledByRelease="cancelled-by-release",e.CancelledOutsideElement="cancelled-outside-element",e))(v||{});const X=["mousedown","mousemove","mouseup","mouseleave","mouseout"],Y=["touchstart","touchmove","touchend","touchcancel"],D=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function U(e){return typeof e=="object"&&e!==null&&"pageX"in e&&typeof e.pageX=="number"&&"pageY"in e&&typeof e.pageY=="number"}function I(e){var o;return X.includes((o=e==null?void 0:e.nativeEvent)==null?void 0:o.type)}function B(e){var o;return Y.includes((o=e==null?void 0:e.nativeEvent)==null?void 0:o.type)||"touches"in e}function S(e){const{nativeEvent:o}=e;return o?D.includes(o==null?void 0:o.type)||"pointerId"in o:!1}function g(e){return I(e)||B(e)||S(e)}function R(e){var o;const l=B(e)?(o=e==null?void 0:e.touches)==null?void 0:o[0]:e;return U(l)?{x:l.pageX,y:l.pageY}:null}function j(e){return{target:e.target,currentTarget:e.currentTarget,nativeEvent:e,persist:()=>{}}}function z(e,{threshold:o=400,captureEvent:l=!1,detect:L=d.Pointer,cancelOnMovement:f=!1,cancelOutsideElement:E=!0,filterEvents:h,onStart:y,onMove:w,onFinish:M,onCancel:b}={}){const x=u.useRef(!1),s=u.useRef(!1),O=u.useRef(),i=u.useRef(),C=u.useRef(e),a=u.useRef(null),p=u.useCallback(n=>t=>{s.current||g(t)&&(h!==void 0&&!h(t)||(l&&t.persist(),y==null||y(t,{context:n}),a.current=R(t),s.current=!0,O.current=t.currentTarget,i.current=setTimeout(()=>{C.current&&(C.current(t,{context:n}),x.current=!0)},o)))},[l,h,y,o]),c=u.useCallback(n=>(t,r)=>{g(t)&&s.current&&(a.current=null,l&&t.persist(),x.current?M==null||M(t,{context:n}):s.current&&(b==null||b(t,{context:n,reason:r??v.CancelledByRelease})),x.current=!1,s.current=!1,i.current!==void 0&&clearTimeout(i.current))},[l,M,b]),m=u.useCallback(n=>t=>{if(g(t)&&(w==null||w(t,{context:n}),f!==!1&&a.current)){const r=R(t);if(r){const T=f===!0?25:f,P={x:Math.abs(r.x-a.current.x),y:Math.abs(r.y-a.current.y)};(P.x>T||P.y>T)&&c(n)(t,v.CancelledByMovement)}}},[c,f,w]),k=u.useCallback(n=>{if(e===null)return{};switch(L){case d.Mouse:{const t={onMouseDown:p(n),onMouseMove:m(n),onMouseUp:c(n)};return E&&(t.onMouseLeave=r=>{c(n)(r,v.CancelledOutsideElement)}),t}case d.Touch:return{onTouchStart:p(n),onTouchMove:m(n),onTouchEnd:c(n)};case d.Pointer:{const t={onPointerDown:p(n),onPointerMove:m(n),onPointerUp:c(n)};return E&&(t.onPointerLeave=r=>c(n)(r,v.CancelledOutsideElement)),t}}},[e,c,E,L,m,p]);return u.useEffect(()=>{function n(t){const r=j(t);c()(r)}return window.addEventListener("mouseup",n),window.addEventListener("touchend",n),window.addEventListener("pointerup",n),()=>{window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),window.removeEventListener("pointerup",n)}},[c]),u.useEffect(()=>()=>{i.current!==void 0&&clearTimeout(i.current)},[]),u.useEffect(()=>{C.current=e},[e]),k}export{z as V};
