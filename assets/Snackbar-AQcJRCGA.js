import{u as K,j as d,R as Y,b as O,f as Q,r as l,g as V,aV as J}from"./index-AWcCmRSM.js";import{g as X,aq as Z,ar as S,v as tt,as as et,at as nt,au as ot,B as st,av as rt}from"./index-BGqKRUTb.js";import{u as at}from"./useCSSKeyframesAnimationController-BThv-rPy.js";const ct="_body_fjiy3_1",it="_sizeYRegular_fjiy3_21",ut="_sizeYNone_fjiy3_33",lt="_modeDark_fjiy3_45",dt="_before_fjiy3_49",_t="_after_fjiy3_54",ft="_content_fjiy3_59",mt="_contentText_fjiy3_65",yt="_contentSubtitle_fjiy3_75",pt="_layoutHorizontal_fjiy3_87",ht="_action_fjiy3_87",xt="_layoutVertical_fjiy3_93",bt="_layoutNone_fjiy3_107",Et="_layoutVerticalMq_fjiy3_116",i={body:ct,sizeYRegular:it,sizeYNone:ut,modeDark:lt,before:dt,after:_t,content:ft,contentText:mt,contentSubtitle:yt,layoutHorizontal:pt,action:ht,layoutVertical:xt,layoutNone:bt,layoutVerticalMq:Et},zt={none:i.layoutNone,vertical:i.layoutVertical,horizontal:i.layoutHorizontal},gt={none:i.sizeYNone,regular:i.sizeYRegular};function A({layout:n,action:e,after:t,before:o,mode:a,subtitle:r,children:b,...h}){const{sizeY:E="none"}=K(),z=t||r?"vertical":"none";return d.jsxs(Y,{...h,baseClassName:O(i.body,zt[n||z],E!=="compact"&&gt[E],a==="dark"&&i.modeDark),children:[o&&d.jsx("div",{className:i.before,children:o}),d.jsxs("div",{className:i.content,children:[d.jsx(X,{className:i.contentText,children:b}),r&&!e&&d.jsx(Z,{className:i.contentSubtitle,children:r}),e&&!r&&d.jsx("div",{className:i.action,children:e})]}),t&&d.jsx("div",{className:i.after,children:t})]})}function Tt(n,e){if(e!==void 0)switch(n){case"top-start":case"top":case"top-end":return{top:e};case"bottom-start":case"bottom":case"bottom-end":return{bottom:e}}}function kt(n,e,t){return{shifted:!1,direction:null,isDesktop:t.smallTabletPlus.matches,x:0,y:0,width:n,height:e}}function St(n,e,t){if(e.isDesktop)n.endsWith("start")?e.x=S(t.x,-e.width,0):n.endsWith("end")&&(e.x=S(t.x,0,e.width)),n.startsWith("bottom")&&(e.y=S(t.y,0,e.height));else if(n.startsWith("bottom")){e.x=t.x;const o=t.x<0?-1:null,a=t.x>0?1:null;e.direction=o||a}return n.startsWith("top")&&(e.y=S(t.y,-e.height,0)),e.shifted=!0,e}const p=200;function jt(n,e,t,o){if(!e.shifted)return!1;const a={x:!1,y:!1},r={x:!1,y:!1};return e.isDesktop?(n.endsWith("start")?(a.x=t.x<-t.width/2,r.x=t.x<0?o.x<-p:!1):n.endsWith("end")&&(a.x=t.x>t.width/2,r.x=t.x>0?o.x>p:!1),n.startsWith("bottom")&&(a.y=t.y>t.height/2,r.y=t.y>0?o.y>p:!1)):n.startsWith("bottom")&&(a.x=t.x<-t.width/2||t.x>t.width/2,r.x=t.x<0&&o.x<-p||t.x>0&&o.x>p),n.startsWith("top")&&(a.y=t.y<-t.height/2,r.y=t.y<0?o.y<-p:!1),a.x||r.x||a.y||r.y}const Bt="_host_n1z7r_1",Nt="_ios_n1z7r_20",Mt="_placementTopStart_n1z7r_24",vt="_placementTop_n1z7r_24",Rt="_placementTopEnd_n1z7r_26",Pt="_placementBottomStart_n1z7r_33",Wt="_placementBottomEnd_n1z7r_37",wt="_placementBottom_n1z7r_33",It="_stateEnter_n1z7r_137",Vt="_stateEntering_n1z7r_138",Yt="_stateEntered_n1z7r_149",Ot="_touched_n1z7r_155",At="_stateExit_n1z7r_159",Gt="_stateExiting_n1z7r_160",s={host:Bt,ios:Nt,placementTopStart:Mt,placementTop:vt,placementTopEnd:Rt,placementBottomStart:Pt,placementBottomEnd:Wt,placementBottom:wt,in:"_in_n1z7r_101",stateEnter:It,stateEntering:Vt,"animation-snackbar-slide-in":"_animation-snackbar-slide-in_n1z7r_1","animation-snackbar-fade-in":"_animation-snackbar-fade-in_n1z7r_1",stateEntered:Yt,touched:Ot,stateExit:At,stateExiting:Gt,"animation-snackbar-slide-out":"_animation-snackbar-slide-out_n1z7r_1","animation-snackbar-fade-out":"_animation-snackbar-fade-out_n1z7r_1"},Ht={"top-start":s.placementTopStart,top:s.placementTop,"top-end":s.placementTopEnd,"bottom-start":s.placementBottomStart,bottom:s.placementBottom,"bottom-end":s.placementBottomEnd},Ut={enter:s.stateEnter,entering:s.stateEntering,entered:s.stateEntered,exit:s.stateExit,exiting:s.stateExiting,exited:void 0},qt=({placement:n="bottom-start",children:e,layout:t,action:o,before:a,after:r,duration:b=4e3,onActionClick:h,onClose:E,mode:z="default",subtitle:G,offsetY:H,getRootRef:U,...q})=>{const F=Q(),[m,L]=l.useState(!0),[y,M]=l.useState(!1),c=tt(U),v=et(c),R=l.useRef(null),f=l.useRef(null),u=l.useRef(null),g=l.useRef(null),P=l.useRef(void 0),$=nt(),[T,D]=at(m?"enter":"exit",{onExited:E}),k=l.useCallback(()=>{g.current!==null&&(cancelAnimationFrame(g.current),g.current=null)},[]),j=l.useCallback((_,N,I)=>{g.current=requestAnimationFrame(()=>{c.current&&(_===null?c.current.style.removeProperty("--vkui_internal--snackbar_shift_x"):c.current.style.setProperty("--vkui_internal--snackbar_shift_x",`${_}px`),N===null?c.current.style.removeProperty("--vkui_internal--snackbar_shift_y"):c.current.style.setProperty("--vkui_internal--snackbar_shift_y",`${N}px`),I===null?c.current.style.removeProperty("--vkui_internal--snackbar_direction"):c.current.style.setProperty("--vkui_internal--snackbar_direction",`${I}`))})},[c]),x=l.useCallback(()=>{L(!1)},[]),C=_=>{x(),o&&(h==null||h(_))},W=_=>{f.current=new rt,f.current.setStartCoords(_.nativeEvent),u.current=kt(c.current.offsetWidth,c.current.offsetHeight,$),M(!0)},w=_=>{u.current&&f.current&&(f.current.setInitialTimeOnce(),f.current.setEndCoords(_.nativeEvent),u.current=St(n,u.current,f.current.delta()),u.current.shifted&&j(u.current.x,u.current.y,u.current.direction))},B=()=>{y&&u.current&&f.current&&jt(n,u.current,J(c.current,R.current),f.current.velocity())&&x(),M(!1)};return V(function(){if(!(!m||v||y||T!=="entered"))return P.current=setTimeout(x,b),function(){clearTimeout(P.current)}},[m,v,y,T,x,b]),V(function(){y||(k(),u.current=null,f.current=null,m&&j(null,null,null))},[y,m,j,k]),l.useEffect(()=>k,[k]),ot(m,x),T==="exited"?null:d.jsx(Y,{...q,role:"presentation",baseClassName:O(s.host,F==="ios"&&s.ios,y&&s.touched,Ht[n],Ut[T]),baseStyle:Tt(n,H),getRootRef:c,children:d.jsx("div",{role:"alert",className:s.in,ref:R,onTouchStart:W,onTouchMove:w,onTouchEnd:B,onMouseDown:W,onMouseMove:w,onMouseUp:B,onMouseLeave:B,...D,children:d.jsx(A,{mode:z,layout:t,before:a,after:r,subtitle:G,action:o&&d.jsx(st,{align:"left",mode:"link",appearance:z==="dark"?"overlay":"accent",size:"s",onClick:C,children:o}),children:e})})})};qt.Basic=A;export{qt as S};
