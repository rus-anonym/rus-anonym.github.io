import{u as Z,r as i,j as c,R as de,b as ee,w as G,ah as pe,V as fe,aR as X,a6 as q,a5 as he,B as me,an as j,aT as Ce}from"./index-C03CfOsF.js";import{a6 as _e,a7 as ve,ak as te,I as be,w as xe,a3 as je,Y as Ne,al as ke,am as ge}from"./index-MCajRGIq.js";import{a as ye}from"./Search-CUGH_Bnc.js";const Ee="_host_16sjq_1",Re="_removable_16sjq_12",Ie="_content_16sjq_31",ze="_sizeYCompact_16sjq_45",Fe="_sizeYNone_16sjq_54",Oe="_remove_16sjq_68",Ye="_before_16sjq_80",Te="_after_16sjq_85",_={host:Ee,in:"_in_16sjq_11",removable:Re,content:Ie,sizeYCompact:ze,sizeYNone:Fe,remove:Oe,before:Ye,after:Te},De={none:_.sizeYNone,compact:_.sizeYCompact},Le=({Component:e="span",value:s="",removable:r=!0,onRemove:n,removeLabel:d="Удалить",before:p,after:y,disabled:C,readOnly:v,children:b,className:O,onFocus:f,onBlur:m,...Y})=>{const{sizeY:E="none"}=Z(),{focusVisible:x,onFocus:l,onBlur:h}=_e(),T=ve({focusVisible:x}),R=a=>{f&&f(a),l(a)},D=a=>{m&&m(a),h(a)},I=i.useCallback(a=>{n==null||n(a,s)},[n,s]);return c.jsxs(de,{...Y,Component:e,className:ee(_.host,E!=="regular"&&De[E],T,O),"aria-readonly":v,"aria-disabled":C,onFocus:C?void 0:R,onBlur:C?void 0:D,children:[c.jsxs("div",{className:_.in,children:[G(p)&&c.jsx("div",{className:_.before,children:p}),c.jsx(pe,{className:_.content,children:b}),G(y)&&c.jsx("div",{className:_.after,children:y})]}),!v&&r&&c.jsx("div",{className:_.removable,children:c.jsxs("button",{tabIndex:-1,disabled:C,className:_.remove,onClick:C?void 0:I,children:[c.jsxs(fe,{children:["  ",d," ",b]}),c.jsx(te,{})]})})]})},Ae=({className:e,onClick:s,...r})=>c.jsx(be,{Component:"button",label:"Очистить поле",onKeyDown:X,type:"button",activeMode:"opacity",hoverMode:"opacity",...r,className:e,onClick:n=>{X(n),n.preventDefault(),s()},children:c.jsx(te,{})}),H=[],M="";function Be(e){return e.value}function Ve(e){return e.label}function qe(e,s){return{value:e,label:s}}function $e(e){const{label:s,...r}=e;return c.jsx(Le,{removable:!e.disabled,...r,children:s})}const se=e=>typeof e=="object"&&"value"in e,J=e=>e?e.value===M:!0,we=(e,s)=>{const r=se(e)?e.value:e;return s.findIndex(n=>n.value===r)},w=e=>{const s=e&&e.dataset.index;return typeof s=="string"?Number(s):-1},He=e=>{const s=e&&e.dataset.value;return typeof s=="string"?s:-1},Me=(e,s,r)=>{const n=r-1;switch(s){case"prev":const d=e-1;return d<0?n:d;case"next":const p=e+1;return p>n?0:p;case"last":return n;default:return-1}},Ke="_host_17h4k_1",Ue="_chip_17h4k_17",We="_el_17h4k_22",Pe="_hasPlaceholder_17h4k_64",Se="_sizeYCompact_17h4k_74",Ge="_sizeYNone_17h4k_79",F={host:Ke,chip:Ue,el:We,hasPlaceholder:Pe,sizeYCompact:Se,sizeYNone:Ge},Xe={none:F.sizeYNone,compact:F.sizeYCompact},tt=({getRootRef:e,style:s,className:r,before:n,after:d,status:p,mode:y,maxHeight:C,value:v=H,onAddChipOption:b,onRemoveChipOption:O,renderChip:f=$e,getRef:m,id:Y,inputValue:E=M,placeholder:x,disabled:l,readOnly:h,addOnBlur:T,onBlur:R,onInputChange:D,ClearButton:I=Ae,clearButtonShown:a,clearButtonTestId:N,onClear:L,...A})=>{const{sizeY:z="none"}=Z(),B=i.useId(),u=xe(m),k=i.useRef(null),g=v.length,K=g===0,[ne,U]=i.useState(0),ae=t=>{U(0),t.focus()},V=(t,o,ie)=>{const P=Me(t,o,g),S=ie.querySelector(`[data-index="${P}"]`);S&&(U(P),S.focus())},W=(t,o)=>{!u.current||!k.current||(g>1?o===g-1?V(o,"prev",k.current):V(o,"next",k.current):ae(u.current),O(t))},oe=t=>{const o=t.target;if(!(t.defaultPrevented||!k.current||!me(o)))switch(t.key){case j.ENTER:{!h&&q(o,u.current)&&u.current&&!J(u.current)&&(t.preventDefault(),b(u.current.value));break}case j.DELETE:case j.BACKSPACE:{!h&&g>0&&(q(o,u.current)?t.key===j.BACKSPACE&&J(u.current)&&(t.preventDefault(),V(w(o),"last",k.current)):(t.preventDefault(),W(He(o),w(o))));break}case j.ARROW_UP:case j.ARROW_LEFT:case j.ARROW_DOWN:case j.ARROW_RIGHT:{g!==0&&!q(o,u.current)&&(t.preventDefault(),V(w(o),Ce(t.key),k.current));break}}},ce=t=>{R&&R(t),T&&!t.defaultPrevented&&u.current&&b(u.current.value)},re=(t,o)=>{t.preventDefault(),t.stopPropagation(),W(o,we(o,v))},le=t=>{t.defaultPrevented||q(t.currentTarget,he(t.currentTarget))||u.current&&u.current.focus()},$=i.useMemo(()=>{if(a)return c.jsx(I,{onClick:L,disabled:l,"data-testid":N})},[I,a,N,l,L]),ue=i.useMemo(()=>{if($||d)return c.jsxs(c.Fragment,{children:[$,d]})},[d,$]);return c.jsx(je,{Component:"div",getRootRef:e,style:s,disabled:l,before:n,after:ue,status:p,mode:y,className:r,maxHeight:C,onClick:l?void 0:le,children:c.jsxs("div",{className:ee(F.host,z!=="regular"&&Xe[z],K&&F.hasPlaceholder),ref:k,role:"listbox","aria-orientation":"horizontal","aria-disabled":l,"aria-readonly":h,onKeyDown:l?void 0:oe,children:[v.map((t,o)=>c.jsx(i.Fragment,{children:f({Component:"div",value:t.value,label:t.label,disabled:t.disabled||l,readOnly:t.readOnly||h,className:F.chip,onRemove:re,"data-index":o,"data-value":t.value,tabIndex:ne===o?0:-1,role:"option","aria-selected":!0,"aria-posinset":o+1,"aria-setsize":g},t)},`${typeof t.value}-${t.value}`)),c.jsx(Ne,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:!1,...A,Component:"input",type:"text",id:Y||`chips-input-base-generated-id-${B}`,getRootRef:u,className:F.el,disabled:l,readOnly:h,placeholder:K?x:void 0,value:E,onChange:D,onBlur:ce})]})})},Je=(e,s="")=>{try{const r=e.value;e.value=s;const n=e._valueTracker;n&&n.setValue(r);const d=new Event("input",{bubbles:!0});e.dispatchEvent(d)}catch{}},Q=(e,s,r)=>e.map(n=>({...n,label:r(n),value:s(n)})),st=({value:e,defaultValue:s=H,onChange:r,getOptionLabel:n=Ve,getOptionValue:d=Be,getNewOptionData:p=qe,inputValue:y,defaultInputValue:C=M,onInputChange:v,disabled:b})=>{const[O,f]=ke({disabled:b,value:e?Q(e,d,n):void 0,defaultValue:Q(s,d,n),onChange:r}),m=i.useRef(null),[Y,E]=ge({disabled:b,value:y,defaultValue:C,onChange:v}),x=i.useCallback((a,N)=>{f(L=>{const A=se(a),z=A?p(a.value,a.label):p(a,typeof a=="string"?a:""),B=L.filter(u=>z.value!==u.value);return N===!0&&B.push(A?{...a,...z}:z),B})},[f,p]),l=i.useCallback(()=>{m.current&&Je(m.current,"")},[m]),h=i.useCallback(a=>x(a,!0),[x]),T=i.useCallback(a=>x(a,!1),[x]),R=i.useCallback(a=>{const N=a.trim();N&&(h(N),l())},[h,l]),D=i.useCallback(()=>{f(s)},[s,f]),I=i.useCallback(()=>{f(H),l()},[l,f]);return ye(m,D),{value:O,addOption:h,addOptionFromInput:R,removeOption:T,inputRef:m,inputValue:Y,onInputChange:E,clearInput:l,clearOptions:I}};export{tt as C,M as D,Be as a,qe as b,H as c,Ve as g,$e as r,Q as t,st as u};
