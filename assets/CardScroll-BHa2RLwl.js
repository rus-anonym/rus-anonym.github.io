import{m as X,j as i,R as P,b as k,V as Y,r as s,k as H,h as q}from"./index-r1diih1v.js";import{h as Z,t as G,ao as J}from"./index-CdXxJyXX.js";var K=X("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" /></g></symbol>',16,24);const Q="_host_fksue_1",tt="_directionLeft_fksue_15",et="_directionRight_fksue_16",nt="_directionUp_fksue_21",ot="_directionDown_fksue_22",rt="_icon_fksue_27",st="_sizeS_fksue_37",it="_sizeM_fksue_43",ct="_defaultIcon_fksue_73",m={host:Q,directionLeft:tt,directionRight:et,directionUp:nt,directionDown:ot,icon:rt,sizeS:st,sizeM:it,defaultIcon:ct},lt={s:m.sizeS,m:m.sizeM},at={up:m.directionUp,right:m.directionRight,down:m.directionDown,left:m.directionLeft},dt={up:"Назад",right:"Вперед",down:"Вперед",left:"Назад"},ut=({size:t})=>{let e=K;return t==="s"&&(e=Z),i.jsx(e,{className:m.defaultIcon})},A=({size:t="m",offsetY:e,direction:c,label:l,children:h=i.jsx(ut,{size:t}),...d})=>{const r=l??dt[c];return i.jsxs(P,{Component:"button",type:"button",baseClassName:k(m.host,lt[t],at[c]),...d,children:[r&&i.jsx(Y,{children:r}),i.jsx("span",{className:m.icon,style:e?{top:e}:void 0,children:h})]})};function ft(){const t=s.useRef(null),[e,c]=s.useState(void 0),[l,h]=s.useState(void 0),{window:d}=H();return q(()=>{if(!d||!t.current)return;const a=d.getComputedStyle(t.current);c(a.direction),h(a.writingMode)},[d]),[t,e,l]}function ht(t){return .5*(1-Math.cos(Math.PI*t))}const _t="_host_9wc9i_1",wt="_inWrapper_9wc9i_27",mt="_arrow_9wc9i_33",pt="_withConstArrows_9wc9i_44",St="_arrowLeft_9wc9i_50",gt="_arrowRight_9wc9i_54",C={host:_t,in:"_in_9wc9i_12",inWrapper:wt,arrow:mt,withConstArrows:pt,arrowLeft:St,arrowRight:gt};function $(){return performance&&performance.now?performance.now():Date.now()}function O(t){return t>0?Math.ceil(t):Math.floor(t)}const E=t=>O(t.scrollLeft),Ct=250;function xt({scrollElement:t,getScrollPosition:e,animationQueue:c,onScrollToEndBorder:l,onScrollEnd:h,onScrollStart:d,initialScrollWidth:r,scrollAnimationDuration:a,textDirection:p}){if(!t||!e)return;const L=(p==="ltr"?1:-1)*(r-t.offsetWidth);let S=E(t),n=e(S);d(),S*n<0&&(n=0),Math.abs(n)>=Math.abs(L)&&(l(),n=L);const x=$();(function f(){const w=$(),b=Math.min((w-x)/a,1),_=ht(b),M=S+(n-S)*_;t.scrollLeft=O(M);const R=p==="ltr"?Math.max(0,n):Math.min(0,n);if(E(t)!==R&&b!==1){requestAnimationFrame(f);return}h(),c.shift(),c.length>0&&c[0]()})()}const bt=({children:t,getScrollToLeft:e,getScrollToRight:c,showArrows:l=!0,arrowSize:h="m",arrowOffsetY:d,scrollAnimationDuration:r=Ct,getRef:a,scrollOnAnyWheel:p=!1,...L})=>{const[S,n]=s.useState(!1),[x,f]=s.useState(!1),[w,b]=ft(),_=b||"ltr",M=_==="ltr"?n:f,R=_==="ltr"?f:n,D=s.useRef(!1),u=G(a,w),y=s.useRef([]),W=J(),z=s.useCallback(o=>{const g=u.current;y.current.push(()=>{var B;return xt({scrollElement:g,getScrollPosition:o,animationQueue:y.current,onScrollToEndBorder:()=>R(!1),onScrollEnd:()=>D.current=!1,onScrollStart:()=>D.current=!0,initialScrollWidth:((B=g==null?void 0:g.firstElementChild)==null?void 0:B.scrollWidth)||0,scrollAnimationDuration:r,textDirection:_})}),y.current.length===1&&y.current[0]()},[u,r,_,R]),U=s.useCallback(()=>{z(e??(g=>g-u.current.offsetWidth))},[e,z,u]),F=s.useCallback(()=>{z(c??(g=>g+u.current.offsetWidth))},[c,z,u]),j=s.useCallback(()=>{if(l&&W&&u.current&&!D.current){const o=u.current;M(o.scrollLeft!==0),R(Math.abs(E(o))+o.offsetWidth<o.scrollWidth)}},[l,W,u,M,R]);s.useEffect(j,[j,t]);const N=s.useCallback(o=>{u.current.scrollBy({left:o.deltaX+o.deltaY,behavior:"auto"})},[u]),V=s.useCallback(o=>{N(o),o.preventDefault()},[N]),T=s.useCallback(o=>{(o.deltaX||o.deltaY&&p)&&N(o)},[N,p]);return i.jsxs(P,{...L,baseClassName:k(C.host,"vkuiInternalHorizontalScroll",l==="always"&&C.withConstArrows),onMouseEnter:j,children:[l&&(W||W===void 0)&&S&&i.jsx(A,{"data-testid":void 0,size:h,offsetY:d,direction:"left","aria-hidden":!0,tabIndex:-1,className:k(C.arrow,C.arrowLeft),onClick:U,onWheel:T}),l&&(W||W===void 0)&&x&&i.jsx(A,{"data-testid":void 0,size:h,offsetY:d,direction:"right","aria-hidden":!0,tabIndex:-1,className:k(C.arrow,C.arrowRight),onClick:F,onWheel:T}),i.jsx("div",{className:C.in,ref:u,onScroll:j,onWheel:p?V:void 0,children:i.jsx("div",{className:C.inWrapper,children:t})})]})},Lt="_host_ud7gc_1",Rt="_modeShadow_ud7gc_9",Wt="_modeOutline_ud7gc_18",kt="_modePlain_ud7gc_19",vt="_withBorder_ud7gc_23",v={host:Lt,modeShadow:Rt,modeOutline:Wt,modePlain:kt,withBorder:vt},Pt=({mode:t="tint",Component:e="li",...c})=>{const l=t==="outline"||t==="outline-tint";return i.jsx(P,{...c,Component:e,baseClassName:k(v.host,t==="outline"&&v.modeOutline,t==="shadow"&&v.modeShadow,t==="plain"&&v.modePlain,l&&v.withBorder)})},It="_host_1nbz3_1",Mt="_gap_1nbz3_13",yt="_withPaddings_1nbz3_23",I={host:It,in:"_in_1nbz3_7",gap:Mt,withPaddings:yt},zt={s:"vkuiInternalCardScroll--size-s",m:"vkuiInternalCardScroll--size-m",l:"vkuiInternalCardScroll--size-l"},Dt=({children:t,size:e="s",showArrows:c=!0,padding:l=!1,Component:h="ul",...d})=>{const r=s.useRef(null),a=s.useRef(null),{window:p}=H();function L(n){if(!r.current||!a.current)return n;const x=r.current.offsetWidth,f=[...r.current.children].findIndex(_=>_.offsetLeft+_.offsetWidth+parseInt(p.getComputedStyle(_).marginRight)-n>=0);if(f===-1)return n;if(f===0)return 0;const w=r.current.children[f],b=w.offsetLeft-(x-w.offsetWidth)+a.current.offsetWidth;return b<=2*a.current.offsetWidth?0:b}function S(n){if(!r.current||!a.current)return n;const x=r.current.offsetWidth,f=Array.prototype.find.call(r.current.children,w=>w.offsetLeft+w.offsetWidth-n>x);return f?f.offsetLeft-a.current.offsetWidth:n}return i.jsx(P,{...d,Component:h,baseClassName:k(I.host,"vkuiInternalCardScroll",e!==!1&&zt[e],l&&I.withPaddings),children:i.jsx(bt,{getScrollToLeft:L,getScrollToRight:S,showArrows:c,children:i.jsxs("div",{className:I.in,ref:r,children:[i.jsx("span",{className:I.gap,ref:a}),t,i.jsx("span",{className:I.gap})]})})})};export{Dt as C,Pt as a};
