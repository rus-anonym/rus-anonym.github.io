import{u as Z,r as i,j as r,R as de,b as ee,v as q,ai as pe,V as fe,aR as X,a7 as V,a6 as me,B as he,ao as y,aU as Ce}from"./index-BSa9nLCW.js";import{a7 as ve,a8 as _e,am as te,I as be,x as xe,a4 as ye,$ as Ne,an as ke,ao as ge}from"./index-C24b8zzd.js";import{a as Ee}from"./Search-CPXZB-Fw.js";const Re="_host_1owoa_1",Ie="_removable_1owoa_12",ze="_content_1owoa_31",je="_sizeYCompact_1owoa_45",Fe="_sizeYNone_1owoa_54",Oe="_remove_1owoa_68",Te="_before_1owoa_80",Ye="_after_1owoa_85",v={host:Re,in:"_in_1owoa_11",removable:Ie,content:ze,sizeYCompact:je,sizeYNone:Fe,remove:Oe,before:Te,after:Ye},De={none:v.sizeYNone,compact:v.sizeYCompact},Le=({Component:e="span",value:s="",removable:c=!0,onRemove:n,removeLabel:d="Удалить",before:p,after:E,disabled:C,readOnly:_,children:b,className:O,onFocus:f,onBlur:h,...T})=>{const{sizeY:R="none"}=Z(),{focusVisible:x,onFocus:u,onBlur:m}=ve(),Y=_e({focusVisible:x}),I=a=>{f&&f(a),u(a)},D=a=>{h&&h(a),m(a)},z=i.useCallback(a=>{n==null||n(a,s)},[n,s]);return r.jsxs(de,{...T,Component:e,className:ee(v.host,R!=="regular"&&De[R],Y,O),"aria-readonly":_,"aria-disabled":C,onFocus:C?void 0:I,onBlur:C?void 0:D,children:[r.jsxs("div",{className:v.in,children:[q(p)&&r.jsx("div",{className:v.before,children:p}),r.jsx(pe,{className:v.content,children:b}),q(E)&&r.jsx("div",{className:v.after,children:E})]}),!_&&c&&r.jsx("div",{className:v.removable,children:r.jsxs("button",{tabIndex:-1,disabled:C,className:v.remove,onClick:C?void 0:z,children:[r.jsxs(fe,{children:["  ",d," ",b]}),r.jsx(te,{})]})})]})},Ae=({className:e,onClick:s,...c})=>r.jsx(be,{Component:"button",label:"Очистить поле",onKeyDown:X,type:"button",activeMode:"opacity",hoverMode:"opacity",...c,className:e,onClick:n=>{X(n),n.preventDefault(),s()},children:r.jsx(te,{})}),M=[],U="";function we(e){return e.value}function Be(e){return e.label}function Ve(e,s){return{value:e,label:s}}function $e(e){const{label:s,...c}=e;return r.jsx(Le,{removable:!e.disabled,...c,children:s})}const se=e=>typeof e=="object"&&"value"in e,J=e=>e?e.value===U:!0,He=(e,s)=>{const c=se(e)?e.value:e;return s.findIndex(n=>n.value===c)},H=e=>{const s=e&&e.dataset.index;return typeof s=="string"?Number(s):-1},Me=e=>{const s=e&&e.dataset.value;return(e&&e.dataset.valueType)==="number"?Number(s):typeof s=="string"?s:-1},Ue=(e,s,c)=>{const n=c-1;switch(s){case"prev":const d=e-1;return d<0?n:d;case"next":const p=e+1;return p>n?0:p;case"last":return n;default:return-1}},Ke="_host_8ik46_1",We="_chip_8ik46_17",Pe="_el_8ik46_22",Se="_hasPlaceholder_8ik46_64",Ge="_sizeYCompact_8ik46_74",qe="_sizeYNone_8ik46_79",F={host:Ke,chip:We,el:Pe,hasPlaceholder:Se,sizeYCompact:Ge,sizeYNone:qe},Xe={none:F.sizeYNone,compact:F.sizeYCompact},tt=({getRootRef:e,style:s,className:c,before:n,after:d,status:p,mode:E,maxHeight:C,value:_=M,onAddChipOption:b,onRemoveChipOption:O,renderChip:f=$e,getRef:h,id:T,inputValue:R=U,placeholder:x,disabled:u,readOnly:m,addOnBlur:Y,onBlur:I,onInputChange:D,ClearButton:z=Ae,clearButtonShown:a,clearButtonTestId:N,onClear:L,...A})=>{const{sizeY:j="none"}=Z(),w=i.useId(),l=xe(h),k=i.useRef(null),g=_.length,K=g===0,[ne,W]=i.useState(0),ae=t=>{W(0),t.focus()},B=(t,o,ie)=>{const S=Ue(t,o,g),G=ie.querySelector(`[data-index="${S}"]`);G&&(W(S),G.focus())},P=(t,o)=>{!l.current||!k.current||(g>1?o===g-1?B(o,"prev",k.current):B(o,"next",k.current):ae(l.current),O(t))},oe=t=>{const o=t.target;if(!(t.defaultPrevented||!k.current||!he(o)))switch(t.key){case y.ENTER:{!m&&V(o,l.current)&&l.current&&!J(l.current)&&(t.preventDefault(),b(l.current.value));break}case y.DELETE:case y.BACKSPACE:{!m&&g>0&&(V(o,l.current)?t.key===y.BACKSPACE&&J(l.current)&&(t.preventDefault(),B(H(o),"last",k.current)):(t.preventDefault(),P(Me(o),H(o))));break}case y.ARROW_UP:case y.ARROW_LEFT:case y.ARROW_DOWN:case y.ARROW_RIGHT:{g!==0&&!V(o,l.current)&&(t.preventDefault(),B(H(o),Ce(t.key),k.current));break}}},ce=t=>{I&&I(t),Y&&!t.defaultPrevented&&l.current&&b(l.current.value)},re=(t,o)=>{t.preventDefault(),t.stopPropagation(),P(o,He(o,_))},ue=t=>{t.defaultPrevented||V(t.currentTarget,me(t.currentTarget))||l.current&&l.current.focus()},$=i.useMemo(()=>{if(a)return r.jsx(z,{onClick:L,disabled:u,"data-testid":N})},[z,a,N,u,L]),le=i.useMemo(()=>{if($||d)return r.jsxs(r.Fragment,{children:[$,d]})},[d,$]);return r.jsx(ye,{Component:"div",getRootRef:e,style:s,disabled:u,before:n,after:le,status:p,mode:E,className:c,maxHeight:C,onClick:u?void 0:ue,children:r.jsxs("div",{className:ee(F.host,j!=="regular"&&Xe[j],K&&F.hasPlaceholder),ref:k,role:"listbox","aria-orientation":"horizontal","aria-disabled":u,"aria-readonly":m,onKeyDown:u?void 0:oe,children:[_.map((t,o)=>r.jsx(i.Fragment,{children:f({Component:"div",value:t.value,label:t.label,disabled:t.disabled||u,readOnly:t.readOnly||m,className:F.chip,onRemove:re,"data-index":o,"data-value":t.value,"data-value-type":typeof t.value,tabIndex:ne===o?0:-1,role:"option","aria-selected":!0,"aria-posinset":o+1,"aria-setsize":g},t)},`${typeof t.value}-${t.value}`)),r.jsx(Ne,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:!1,...A,Component:"input",type:"text",id:T||`chips-input-base-generated-id-${w}`,getRootRef:l,className:F.el,disabled:u,readOnly:m,placeholder:K?x:void 0,value:R,onChange:D,onBlur:ce})]})})},Je=(e,s="")=>{try{const c=e.value;e.value=s;const n=e._valueTracker;n&&n.setValue(c);const d=new Event("input",{bubbles:!0});e.dispatchEvent(d)}catch{}},Q=(e,s,c)=>e.map(n=>({...n,label:c(n),value:s(n)})),st=({value:e,defaultValue:s=M,onChange:c,getOptionLabel:n=Be,getOptionValue:d=we,getNewOptionData:p=Ve,inputValue:E,defaultInputValue:C=U,onInputChange:_,disabled:b})=>{const[O,f]=ke({disabled:b,value:e?Q(e,d,n):void 0,defaultValue:Q(s,d,n),onChange:c}),h=i.useRef(null),[T,R]=ge({disabled:b,value:E,defaultValue:C,onChange:_}),x=i.useCallback((a,N)=>{f(L=>{const A=se(a),j=A?p(a.value,a.label):p(a,typeof a=="string"?a:""),w=L.filter(l=>j.value!==l.value);return N===!0&&w.push(A?{...a,...j}:j),w})},[f,p]),u=i.useCallback(()=>{h.current&&Je(h.current,"")},[h]),m=i.useCallback(a=>x(a,!0),[x]),Y=i.useCallback(a=>x(a,!1),[x]),I=i.useCallback(a=>{const N=a.trim();N&&(m(N),u())},[m,u]),D=i.useCallback(()=>{f(s)},[s,f]),z=i.useCallback(()=>{f(M),u()},[u,f]);return Ee(h,D),{value:O,addOption:m,addOptionFromInput:I,removeOption:Y,inputRef:h,inputValue:T,onInputChange:R,clearInput:u,clearOptions:z}};export{tt as C,U as D,we as a,Ve as b,M as c,Be as g,$e as r,Q as t,st as u};
