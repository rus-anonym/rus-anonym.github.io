import{_ as G,j as e,S as W,b as U,d as I,r as a,u as ee,g as te,l as se,e as oe,ai as ne}from"./index-DXObVkYb.js";import{y as ie,a3 as le,a4 as re,a5 as ae,a as ce,G as he,U as F,a2 as de,W as ue,X as xe,D as X,a6 as ge,B as q,j as J}from"./index-Dydb4pI3.js";import{S as $}from"./Snackbar-jG69ywRN.js";import{F as K}from"./FormLayoutGroup-CAR1IyHB.js";import{S as Q}from"./Slider-DrJoPLGl.js";import{c as pe}from"./index-59J0kfR1.js";import"./useCSSKeyframesAnimationController-C-DYMe_G.js";import"./Search-6Au3xrdh.js";const fe=n=>{var{width:d=24,height:i=24,viewBox:u="0 0 24 24",children:l,style:c,fill:s}=n,g=G(n,["width","height","viewBox","children","style","fill"]);return e.jsxs(W,U(I({baseClassName:"vkuiIcon--copy_24",viewBox:u,width:d,height:i,style:s?I({color:s},c):c},g),{children:[l,e.jsxs("g",{fill:"none",fillRule:"evenodd",children:[e.jsx("path",{d:"M0 0h24v24H0z"}),e.jsx("path",{fill:"currentColor",fillRule:"nonzero",d:"M4 18a2.01 2.01 0 0 1-2-2.01V5.518A3.517 3.517 0 0 1 5.518 2H15.99A2.01 2.01 0 0 1 18 4H6.764A2.764 2.764 0 0 0 4 6.764zM8.01 6h11.98C21.1 6 22 6.9 22 8.01v11.98c0 1.11-.9 2.01-2.01 2.01H8.01C6.9 22 6 21.1 6 19.99V8.01C6 6.9 6.9 6 8.01 6M9 8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z"})]})]}))},me=n=>{var{width:d=24,height:i=24,viewBox:u="0 0 24 24",children:l,style:c,fill:s}=n,g=G(n,["width","height","viewBox","children","style","fill"]);return e.jsxs(W,U(I({baseClassName:"vkuiIcon--refresh_outline_24",viewBox:u,width:d,height:i,style:s?I({color:s},c):c,fill:"none"},g),{children:[l,e.jsx("path",{fill:"currentColor",d:"M10.274 4.042a.895.895 0 0 1-.02-1.269.904.904 0 0 1 1.274-.02l2.698 2.602A.9.9 0 0 1 14.5 6a.9.9 0 0 1-.274.645l-2.698 2.602a.904.904 0 0 1-1.274-.02.895.895 0 0 1 .02-1.27l1.175-1.133a6.2 6.2 0 0 0-5.245 3.974 6.2 6.2 0 1 0 10.86-1.376.9.9 0 0 1 1.47-1.04 8 8 0 1 1-7.235-3.351z"})]}))},je=n=>{var{width:d=24,height:i=24,viewBox:u="0 0 24 24",children:l,style:c,fill:s}=n,g=G(n,["width","height","viewBox","children","style","fill"]);return e.jsxs(W,U(I({baseClassName:"vkuiIcon--warning_triangle_outline_24",viewBox:u,width:d,height:i,style:s?I({color:s},c):c,fill:"none"},g),{children:[l,e.jsxs("g",{fill:"currentColor",children:[e.jsx("path",{fillRule:"evenodd",d:"M9.489 4.55c1.116-1.933 3.906-1.933 5.023 0l6.928 12c1.116 1.933-.28 4.35-2.512 4.35H5.072c-2.233 0-3.628-2.417-2.512-4.35zm3.464.9a1.1 1.1 0 0 0-1.906 0l-6.928 12a1.1 1.1 0 0 0 .953 1.65h13.856a1.1 1.1 0 0 0 .953-1.65z",clipRule:"evenodd"}),e.jsx("path",{fillRule:"evenodd",d:"M12 8c.497 0 .9.374.9.836v4.828c0 .462-.403.836-.9.836s-.9-.374-.9-.836V8.836c0-.462.403-.836.9-.836",clipRule:"evenodd"}),e.jsx("path",{d:"M13 16.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})]})]}))};function we(n,d){const i=a.useRef(null),u=a.useRef(void 0),l=a.useCallback(s=>{d&&s.offsetParent&&(s.style.height="",s.style.height=`${s.scrollHeight}px`,s.scrollHeight!==u.current&&n&&(n(s),u.current=s.scrollHeight))},[d,n]),c=a.useCallback(()=>{const s=i.current;s&&l(s)},[i,l]);return[i,c]}const ve="_host_ryh4o_1",be="_el_ryh4o_7",Ce="_sizeYCompact_ryh4o_21",Re="_sizeYNone_ryh4o_26",ye="_alignCenter_ryh4o_45",Se="_alignRight_ryh4o_49",k={host:ve,el:be,sizeYCompact:Ce,sizeYNone:Re,alignCenter:ye,alignRight:Se},_e={none:k.sizeYNone,compact:k.sizeYCompact},ze=({grow:n=!0,style:d,onResize:i,className:u,getRootRef:l,getRef:c,rows:s=2,maxHeight:g,status:m,onChange:D,align:B,mode:j,after:S,before:C,afterAlign:r,beforeAlign:L,value:M,...N})=>{const{sizeY:t="none"}=ee(),o=te(),{window:p}=se(),[f,h]=we(i,n),w=ie(c,f);return a.useEffect(h,[h,t,o,M]),le(p,h),e.jsx(re,{className:oe(k.host,t!=="regular"&&_e[t],B==="right"&&k.alignRight,B==="center"&&k.alignCenter,u),style:d,getRootRef:l,disabled:N.disabled,status:m,mode:j,after:S,before:C,afterAlign:r,beforeAlign:L,maxHeight:g,children:e.jsx(ae,{...N,value:M,as:"textarea",rows:s,className:k.el,onChange:ne(D,h),getRootRef:w})})},Ee=()=>{const[n,d]=a.useState(""),[i,u]=a.useState(""),[l,c]=a.useState(64),[s,g]=a.useState(32),[m,D]=a.useState(null),[B,j]=a.useState(null),[S,C]=a.useState(null),{t:r}=ce("translation",{keyPrefix:"pages.utils.list.demotivator"}),L=a.useMemo(()=>{const t=n===""&&i==="";return t&&C(m),!(t||m===null)},[n,i,m]),M=()=>{if(!L)return;const t=document.createElement("canvas"),o=t.getContext("2d",{alpha:!1});t.height=1e4,t.width=1e3;const p=100,f=80,h=14,w=24,P=18,x=P+l,Y=P/1.7+s,V=({ctx:E,text:R,maxWidth:A,font:_})=>{const z=R.split(" "),y=[];let v=z[0];E.font=_;for(let H=1;H<z.length;++H){const b=z[H];E.measureText(v+" "+b).width<A?v+=" "+b:(y.push(v),v=b)}return y.push(v),y};(async()=>{const E=t.width-p*2,R=new Image;R.src=m,await new Promise(T=>R.onload=T);const A=t.width-p*2,_=R.height*A/R.width,z=_+f*1.3+h*2,y=V({ctx:o,text:n,maxWidth:E,font:`${l}px Times New Roman`}),v=V({ctx:o,text:i,maxWidth:E,font:`${s}px Roboto`}),H=f*2+_+h*2+w*2+(y.length*x-x+l)+(i?v.length*Y-Y+s:-(w+x-l));t.height=H,o.fillStyle="black",o.fillRect(-.5,-.5,t.width,t.height),o.drawImage(R,p,f,A,_);const b=[p-h,f-h,A+h*2,_+h*2];o.rect(b[0],b[1],b[2],b[3]),o.strokeStyle="white",o.lineWidth=4,o.stroke(),o.font=`${l}px Times New Roman`,o.fillStyle="white",o.textAlign="center",o.textBaseline="top",y.forEach((T,O)=>{o.fillText(T,t.width/2,z+O*x)}),i&&(o.font=`${s}px Roboto`,o.textBaseline="top",v.forEach((T,O)=>{const Z=z+w+y.length*x+O*Y;o.fillText(T,t.width/2,Z)})),C(t.toDataURL())})()},N=t=>{var f;t.preventDefault();const o=(f=t.clipboardData)==null?void 0:f.items;if(!o)return;let p=!1;for(const h in o){const w=o[h];if(w.kind==="file"){const P=w.getAsFile();if(P){const x=new FileReader;x.onloadend=()=>{x.result&&(D(x.result.toString()),C(x.result.toString()))},x.readAsDataURL(P),p=!0}}}p||j(e.jsx($,{before:e.jsx(je,{role:"alert"}),onClose:()=>j(null),children:r("notFoundClipboardImage")}))};return a.useEffect(()=>(document.addEventListener("paste",N),()=>{document.removeEventListener("paste",N)}),[]),a.useEffect(M,[n,i,l,s,m,L]),e.jsxs(he,{description:e.jsxs(e.Fragment,{children:[`${r("basedOn")} `,e.jsx(J,{target:"_blank",href:"https://github.com/jarvis394/cubebot",children:"cubebot"})," ","(",`${r("author")} `,e.jsx(J,{target:"_blank",href:"https://github.com/jarvis394",children:"jarvis394"}),")"]}),children:[e.jsxs("form",{children:[e.jsxs(K,{mode:"horizontal",children:[e.jsx(F,{top:r("title"),children:e.jsx(de,{multiple:!0,value:n,onChange:t=>d(t.target.value)})}),e.jsx(F,{top:r("fontSize"),bottom:`${l}px`,children:e.jsx(Q,{min:24,max:128,step:1,value:l,onChange:t=>c(t)})})]}),e.jsxs(K,{mode:"horizontal",children:[e.jsx(F,{top:r("subtitle"),children:e.jsx(ze,{value:i,onChange:t=>u(t.target.value)})}),e.jsx(F,{top:r("fontSize"),bottom:`${s}px`,children:e.jsx(Q,{min:12,max:64,step:1,value:s,onChange:t=>g(t)})})]}),m===null&&e.jsx(F,{top:r("uploadImage"),children:e.jsx(ue,{before:e.jsx(xe,{role:"presentation"}),size:"m",accept:".jpg, .jpeg, .png",onChange:t=>{if(!t.target.files||t.target.files.length===0)return;const o=URL.createObjectURL(t.target.files[0]);D(o),C(o)},children:r("openGallery")})}),L&&e.jsx(X,{children:e.jsxs(ge,{stretched:!0,children:[e.jsx(q,{before:e.jsx(fe,{}),size:"l",onClick:()=>{pe(S).then(()=>{j(e.jsx($,{onClose:()=>j(null),children:r("copiedToClipboard")}))}).catch(()=>{const t=document.createElement("a");t.download="demotivator.jpeg",t.href=S,t.click(),t.remove(),j(e.jsx($,{onClose:()=>j(null),children:r("savedOnDevice")}))})},stretched:!0,appearance:"accent",children:r("copy")}),e.jsx(q,{before:e.jsx(me,{}),size:"l",onClick:()=>{D(null),C(null)},stretched:!0,appearance:"neutral",children:r("reset")})]})})]}),S!==null&&e.jsx(X,{children:e.jsx("img",{style:{display:"block",width:"100%",borderRadius:"3px",marginLeft:"auto",marginRight:"auto"},src:S,alt:""})}),B!==null&&B]})};export{Ee as default};
