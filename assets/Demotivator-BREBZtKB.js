import{m as W,r,u as J,f as K,h as Z,j as t,b as ee,ag as te}from"./index-qVLION_7.js";import{x as ne,a3 as oe,a4 as se,a5 as re,a as ae,G as ie,U as N,a2 as le,W as ce,X as he,Q as G,a6 as de,B as U,j as V}from"./index-BPTW7plB.js";import{S as B}from"./Snackbar-BtqVcHQs.js";import{F as Q}from"./FormLayoutGroup-BGR4TXPn.js";import{S as X}from"./Slider-CopXYL0I.js";import{c as ue}from"./index-59J0kfR1.js";import"./useCSSKeyframesAnimationController-pXvxBL7y.js";import"./Search-CEvo4szv.js";var me=W("Icon24Copy","copy_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="copy_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M4 18a2.01 2.01 0 0 1-2-2.01V5.518A3.517 3.517 0 0 1 5.518 2H15.99A2.01 2.01 0 0 1 18 4H6.764A2.764 2.764 0 0 0 4 6.764zM8.01 6h11.98C21.1 6 22 6.9 22 8.01v11.98c0 1.11-.9 2.01-2.01 2.01H8.01C6.9 22 6 21.1 6 19.99V8.01C6 6.9 6.9 6 8.01 6M9 8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z" /></g></symbol>',24,24),ge=W("Icon24RefreshOutline","refresh_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="refresh_outline_24"><path fill="currentColor" d="M10.274 4.042a.895.895 0 0 1-.02-1.269.904.904 0 0 1 1.274-.02l2.698 2.602A.9.9 0 0 1 14.5 6a.9.9 0 0 1-.274.645l-2.698 2.602a.904.904 0 0 1-1.274-.02.895.895 0 0 1 .02-1.27l1.175-1.133a6.2 6.2 0 0 0-5.245 3.974 6.2 6.2 0 1 0 10.86-1.376.9.9 0 0 1 1.47-1.04 8 8 0 1 1-7.235-3.351z" /></symbol>',24,24),pe=W("Icon24WarningTriangleOutline","warning_triangle_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="warning_triangle_outline_24"><g fill="currentColor"><path fill-rule="evenodd" d="M9.489 4.55c1.116-1.933 3.906-1.933 5.023 0l6.928 12c1.116 1.933-.28 4.35-2.512 4.35H5.072c-2.233 0-3.628-2.417-2.512-4.35zm3.464.9a1.1 1.1 0 0 0-1.906 0l-6.928 12a1.1 1.1 0 0 0 .953 1.65h13.856a1.1 1.1 0 0 0 .953-1.65z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 8c.497 0 .9.374.9.836v4.828c0 .462-.403.836-.9.836s-.9-.374-.9-.836V8.836c0-.462.403-.836.9-.836" clip-rule="evenodd" /><path d="M13 16.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" /></g></symbol>',24,24);function fe(c,j){const a=r.useRef(null),C=r.useRef(void 0),i=r.useCallback(o=>{j&&o.offsetParent&&(o.style.height="",o.style.height=`${o.scrollHeight}px`,o.scrollHeight!==C.current&&c&&(c(o),C.current=o.scrollHeight))},[j,c]),T=r.useCallback(()=>{const o=a.current;o&&i(o)},[a,i]);return[a,T]}const xe="_host_ryh4o_1",we="_el_ryh4o_7",be="_sizeYCompact_ryh4o_21",ve="_sizeYNone_ryh4o_26",je="_alignCenter_ryh4o_45",Ce="_alignRight_ryh4o_49",S={host:xe,el:we,sizeYCompact:be,sizeYNone:ve,alignCenter:je,alignRight:Ce},ye={none:S.sizeYNone,compact:S.sizeYCompact},_e=({grow:c=!0,style:j,onResize:a,className:C,getRootRef:i,getRef:T,rows:o=2,maxHeight:M,status:m,onChange:I,align:k,mode:g,after:y,before:w,afterAlign:s,beforeAlign:D,value:P,...L})=>{const{sizeY:e="none"}=J(),n=K(),{window:d}=Z(),[u,l]=fe(a,c),p=ne(T,u);return r.useEffect(l,[l,e,n,P]),oe(d,l),t.jsx(se,{className:ee(S.host,e!=="regular"&&ye[e],k==="right"&&S.alignRight,k==="center"&&S.alignCenter,C),style:j,getRootRef:i,disabled:L.disabled,status:m,mode:g,after:y,before:w,afterAlign:s,beforeAlign:D,maxHeight:M,children:t.jsx(re,{...L,value:P,as:"textarea",rows:o,className:S.el,onChange:te(I,l),getRootRef:p})})},Ee=()=>{const[c,j]=r.useState(""),[a,C]=r.useState(""),[i,T]=r.useState(64),[o,M]=r.useState(32),[m,I]=r.useState(null),[k,g]=r.useState(null),[y,w]=r.useState(null),{t:s}=ae("translation",{keyPrefix:"pages.utils.list.demotivator"}),D=r.useMemo(()=>{const e=c===""&&a==="";return e&&w(m),!(e||m===null)},[c,a,m]),P=()=>{if(!D)return;const e=document.createElement("canvas"),n=e.getContext("2d",{alpha:!1});e.height=1e4,e.width=1e3;const d=100,u=80,l=14,p=24,E=18,h=E+i,O=E/1.7+o,$=({ctx:A,text:b,maxWidth:H,font:_})=>{const z=b.split(" "),v=[];let f=z[0];A.font=_;for(let F=1;F<z.length;++F){const x=z[F];A.measureText(f+" "+x).width<H?f+=" "+x:(v.push(f),f=x)}return v.push(f),v};(async()=>{const A=e.width-d*2,b=new Image;b.src=m,await new Promise(R=>b.onload=R);const H=e.width-d*2,_=b.height*H/b.width,z=_+u*1.3+l*2,v=$({ctx:n,text:c,maxWidth:A,font:`${i}px Times New Roman`}),f=$({ctx:n,text:a,maxWidth:A,font:`${o}px Roboto`}),F=u*2+_+l*2+p*2+(v.length*h-h+i)+(a?f.length*O-O+o:-(p+h-i));e.height=F,n.fillStyle="black",n.fillRect(-.5,-.5,e.width,e.height),n.drawImage(b,d,u,H,_);const x=[d-l,u-l,H+l*2,_+l*2];n.rect(x[0],x[1],x[2],x[3]),n.strokeStyle="white",n.lineWidth=4,n.stroke(),n.font=`${i}px Times New Roman`,n.fillStyle="white",n.textAlign="center",n.textBaseline="top",v.forEach((R,Y)=>{n.fillText(R,e.width/2,z+Y*h)}),a&&(n.font=`${o}px Roboto`,n.textBaseline="top",f.forEach((R,Y)=>{const q=z+p+v.length*h+Y*O;n.fillText(R,e.width/2,q)})),w(e.toDataURL())})()},L=e=>{var u;e.preventDefault();const n=(u=e.clipboardData)==null?void 0:u.items;if(!n)return;let d=!1;for(const l in n){const p=n[l];if(p.kind==="file"){const E=p.getAsFile();if(E){const h=new FileReader;h.onloadend=()=>{h.result&&(I(h.result.toString()),w(h.result.toString()))},h.readAsDataURL(E),d=!0}}}d||g(t.jsx(B,{before:t.jsx(pe,{role:"alert"}),onClose:()=>g(null),children:s("notFoundClipboardImage")}))};return r.useEffect(()=>(document.addEventListener("paste",L),()=>{document.removeEventListener("paste",L)}),[]),r.useEffect(P,[c,a,i,o,m,D]),t.jsxs(ie,{description:t.jsxs(t.Fragment,{children:[`${s("basedOn")} `,t.jsx(V,{target:"_blank",href:"https://github.com/jarvis394/cubebot",children:"cubebot"})," ","(",`${s("author")} `,t.jsx(V,{target:"_blank",href:"https://github.com/jarvis394",children:"jarvis394"}),")"]}),children:[t.jsxs("form",{children:[t.jsxs(Q,{mode:"horizontal",children:[t.jsx(N,{top:s("title"),children:t.jsx(le,{multiple:!0,value:c,onChange:e=>j(e.target.value)})}),t.jsx(N,{top:s("fontSize"),bottom:`${i}px`,children:t.jsx(X,{min:24,max:128,step:1,value:i,onChange:e=>T(e)})})]}),t.jsxs(Q,{mode:"horizontal",children:[t.jsx(N,{top:s("subtitle"),children:t.jsx(_e,{value:a,onChange:e=>C(e.target.value)})}),t.jsx(N,{top:s("fontSize"),bottom:`${o}px`,children:t.jsx(X,{min:12,max:64,step:1,value:o,onChange:e=>M(e)})})]}),m===null&&t.jsx(N,{top:s("uploadImage"),children:t.jsx(ce,{before:t.jsx(he,{role:"presentation"}),size:"m",accept:".jpg, .jpeg, .png",onChange:e=>{if(!e.target.files||e.target.files.length===0)return;const n=URL.createObjectURL(e.target.files[0]);I(n),w(n)},children:s("openGallery")})}),D&&t.jsx(G,{children:t.jsxs(de,{stretched:!0,children:[t.jsx(U,{before:t.jsx(me,{}),size:"l",onClick:()=>{ue(y).then(()=>{g(t.jsx(B,{onClose:()=>g(null),children:s("copiedToClipboard")}))}).catch(()=>{const e=document.createElement("a");e.download="demotivator.jpeg",e.href=y,e.click(),e.remove(),g(t.jsx(B,{onClose:()=>g(null),children:s("savedOnDevice")}))})},stretched:!0,appearance:"accent",children:s("copy")}),t.jsx(U,{before:t.jsx(ge,{}),size:"l",onClick:()=>{I(null),w(null)},stretched:!0,appearance:"neutral",children:s("reset")})]})})]}),y!==null&&t.jsx(G,{children:t.jsx("img",{style:{display:"block",width:"100%",borderRadius:"3px",marginLeft:"auto",marginRight:"auto"},src:y,alt:""})}),k!==null&&k]})};export{Ee as default};
