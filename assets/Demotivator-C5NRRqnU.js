import{m as W,r as a,u as K,f as X,h as Z,j as t,b as ee,ag as te}from"./index-C2AZRDLn.js";import{w as ne,a2 as oe,a3 as se,a4 as ae,a as ie,G as le,Q as N,a1 as re,U as ce,W as de,O as G,a5 as ue,B as U,j as V}from"./index-Ds6OJqbK.js";import{S as B}from"./Snackbar-CCEpc9rX.js";import{F as Q}from"./FormLayoutGroup-By2_A9Cx.js";import{S as q}from"./Slider-Bv36iEN6.js";import{c as he}from"./index-59J0kfR1.js";import"./useCSSKeyframesAnimationController-LNCBVTwT.js";import"./Search-BMDEgb99.js";var me=W("Icon24Copy","copy_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="copy_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M4 18a2.01 2.01 0 0 1-2-2.01V5.518A3.517 3.517 0 0 1 5.518 2H15.99A2.01 2.01 0 0 1 18 4H6.764A2.764 2.764 0 0 0 4 6.764zM8.01 6h11.98C21.1 6 22 6.9 22 8.01v11.98c0 1.11-.9 2.01-2.01 2.01H8.01C6.9 22 6 21.1 6 19.99V8.01C6 6.9 6.9 6 8.01 6M9 8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z" /></g></symbol>',24,24),ge=W("Icon24RefreshOutline","refresh_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="refresh_outline_24"><path fill="currentColor" d="M10.274 4.042a.895.895 0 0 1-.02-1.269.904.904 0 0 1 1.274-.02l2.698 2.602A.9.9 0 0 1 14.5 6a.9.9 0 0 1-.274.645l-2.698 2.602a.904.904 0 0 1-1.274-.02.895.895 0 0 1 .02-1.27l1.175-1.133a6.2 6.2 0 0 0-5.245 3.974 6.2 6.2 0 1 0 10.86-1.376.9.9 0 0 1 1.47-1.04 8 8 0 1 1-7.235-3.351z" /></symbol>',24,24),pe=W("Icon24WarningTriangleOutline","warning_triangle_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="warning_triangle_outline_24"><g fill="currentColor"><path fill-rule="evenodd" d="M9.489 4.55c1.116-1.933 3.906-1.933 5.023 0l6.928 12c1.116 1.933-.28 4.35-2.512 4.35H5.072c-2.233 0-3.628-2.417-2.512-4.35zm3.464.9a1.1 1.1 0 0 0-1.906 0l-6.928 12a1.1 1.1 0 0 0 .953 1.65h13.856a1.1 1.1 0 0 0 .953-1.65z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 8c.497 0 .9.374.9.836v4.828c0 .462-.403.836-.9.836s-.9-.374-.9-.836V8.836c0-.462.403-.836.9-.836" clip-rule="evenodd" /><path d="M13 16.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" /></g></symbol>',24,24);function fe(c,j){const i=a.useRef(null),C=a.useRef(void 0),l=a.useCallback(o=>{j&&o.offsetParent&&(o.style.height="",o.style.height=`${o.scrollHeight}px`,o.scrollHeight!==C.current&&c&&(c(o),C.current=o.scrollHeight))},[j,c]),T=a.useCallback(()=>{const o=i.current;o&&l(o)},[i,l]);return[i,T]}const xe="_host_o6lyk_1",we="_el_o6lyk_7",be="_sizeYCompact_o6lyk_21",ve="_sizeYNone_o6lyk_26",je="_alignCenter_o6lyk_41",Ce="_alignRight_o6lyk_45",S={host:xe,el:we,sizeYCompact:be,sizeYNone:ve,alignCenter:je,alignRight:Ce},ye={none:S.sizeYNone,compact:S.sizeYCompact},_e=({grow:c=!0,style:j,onResize:i,className:C,getRootRef:l,getRef:T,rows:o=2,maxHeight:P,status:m,onChange:k,align:I,mode:g,after:y,before:w,afterAlign:s,beforeAlign:D,value:O,...L})=>{const{sizeY:e="none"}=K(),n=X(),{window:u}=Z(),[h,r]=fe(i,c),p=ne(T,h);return a.useEffect(r,[r,e,n,O]),oe(u,r),t.jsx(se,{className:ee(S.host,e!=="regular"&&ye[e],I==="right"&&S.alignRight,I==="center"&&S.alignCenter,C),style:j,getRootRef:l,disabled:L.disabled,status:m,mode:g,after:y,before:w,afterAlign:s,beforeAlign:D,maxHeight:P,children:t.jsx(ae,{...L,value:O,as:"textarea",rows:o,className:S.el,onChange:te(k,r),getRootRef:p})})},Ee=()=>{const[c,j]=a.useState(""),[i,C]=a.useState(""),[l,T]=a.useState(64),[o,P]=a.useState(32),[m,k]=a.useState(null),[I,g]=a.useState(null),[y,w]=a.useState(null),{t:s}=ie("translation",{keyPrefix:"pages.utils.list.demotivator"}),D=a.useMemo(()=>{const e=c===""&&i==="";return e&&w(m),!(e||m===null)},[c,i,m]),O=()=>{if(!D)return;const e=document.createElement("canvas"),n=e.getContext("2d",{alpha:!1});e.height=1e4,e.width=1e3;const u=100,h=80,r=14,p=24,E=18,d=E+l,M=E/1.7+o,$=({ctx:A,text:b,maxWidth:H,font:_})=>{const z=b.split(" "),v=[];let f=z[0];A.font=_;for(let F=1;F<z.length;++F){const x=z[F];A.measureText(f+" "+x).width<H?f+=" "+x:(v.push(f),f=x)}return v.push(f),v};(async()=>{const A=e.width-u*2,b=new Image;b.src=m,await new Promise(R=>b.onload=R);const H=e.width-u*2,_=b.height*H/b.width,z=_+h*1.3+r*2,v=$({ctx:n,text:c,maxWidth:A,font:`${l}px Times New Roman`}),f=$({ctx:n,text:i,maxWidth:A,font:`${o}px Roboto`}),F=h*2+_+r*2+p*2+(v.length*d-d+l)+(i?f.length*M-M+o:-(p+d-l));e.height=F,n.fillStyle="black",n.fillRect(-.5,-.5,e.width,e.height),n.drawImage(b,u,h,H,_);const x=[u-r,h-r,H+r*2,_+r*2];n.rect(x[0],x[1],x[2],x[3]),n.strokeStyle="white",n.lineWidth=4,n.stroke(),n.font=`${l}px Times New Roman`,n.fillStyle="white",n.textAlign="center",n.textBaseline="top",v.forEach((R,Y)=>{n.fillText(R,e.width/2,z+Y*d)}),i&&(n.font=`${o}px Roboto`,n.textBaseline="top",f.forEach((R,Y)=>{const J=z+p+v.length*d+Y*M;n.fillText(R,e.width/2,J)})),w(e.toDataURL())})()},L=e=>{var h;e.preventDefault();const n=(h=e.clipboardData)==null?void 0:h.items;if(!n)return;let u=!1;for(const r in n){const p=n[r];if(p.kind==="file"){const E=p.getAsFile();if(E){const d=new FileReader;d.onloadend=()=>{d.result&&(k(d.result.toString()),w(d.result.toString()))},d.readAsDataURL(E),u=!0}}}u||g(t.jsx(B,{before:t.jsx(pe,{role:"alert"}),onClose:()=>g(null),children:s("notFoundClipboardImage")}))};return a.useEffect(()=>(document.addEventListener("paste",L),()=>{document.removeEventListener("paste",L)}),[]),a.useEffect(O,[c,i,l,o,m,D]),t.jsxs(le,{description:t.jsxs(t.Fragment,{children:[`${s("basedOn")} `,t.jsx(V,{target:"_blank",href:"https://github.com/jarvis394/cubebot",children:"cubebot"})," ","(",`${s("author")} `,t.jsx(V,{target:"_blank",href:"https://github.com/jarvis394",children:"jarvis394"}),")"]}),children:[t.jsxs("form",{children:[t.jsxs(Q,{mode:"horizontal",children:[t.jsx(N,{top:s("title"),children:t.jsx(re,{multiple:!0,value:c,onChange:e=>j(e.target.value)})}),t.jsx(N,{top:s("fontSize"),bottom:`${l}px`,children:t.jsx(q,{min:24,max:128,step:1,value:l,onChange:e=>T(e)})})]}),t.jsxs(Q,{mode:"horizontal",children:[t.jsx(N,{top:s("subtitle"),children:t.jsx(_e,{value:i,onChange:e=>C(e.target.value)})}),t.jsx(N,{top:s("fontSize"),bottom:`${o}px`,children:t.jsx(q,{min:12,max:64,step:1,value:o,onChange:e=>P(e)})})]}),m===null&&t.jsx(N,{top:s("uploadImage"),children:t.jsx(ce,{before:t.jsx(de,{role:"presentation"}),size:"m",accept:".jpg, .jpeg, .png",onChange:e=>{if(!e.target.files||e.target.files.length===0)return;const n=URL.createObjectURL(e.target.files[0]);k(n),w(n)},children:s("openGallery")})}),D&&t.jsx(G,{children:t.jsxs(ue,{stretched:!0,children:[t.jsx(U,{before:t.jsx(me,{}),size:"l",onClick:()=>{he(y).then(()=>{g(t.jsx(B,{onClose:()=>g(null),children:s("copiedToClipboard")}))}).catch(()=>{const e=document.createElement("a");e.download="demotivator.jpeg",e.href=y,e.click(),e.remove(),g(t.jsx(B,{onClose:()=>g(null),children:s("savedOnDevice")}))})},stretched:!0,appearance:"accent",children:s("copy")}),t.jsx(U,{before:t.jsx(ge,{}),size:"l",onClick:()=>{k(null),w(null)},stretched:!0,appearance:"neutral",children:s("reset")})]})})]}),y!==null&&t.jsx(G,{children:t.jsx("img",{style:{display:"block",width:"100%",borderRadius:"3px",marginLeft:"auto",marginRight:"auto"},src:y,alt:""})}),I!==null&&I]})};export{Ee as default};
