import{m as Y,r as n,g as S,u as P,f as ee,j as s,v as se,b as F,ag as te,V,aC as ae,n as oe}from"./index-qVLION_7.js";import{ae as ne,x as le,N as ce,aq as ie,J as re,I as E,B as M}from"./index-BPTW7plB.js";var de=Y("Icon16Clear","clear_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="clear_16"><path fill-rule="evenodd" d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0M4.563 4.564a.9.9 0 0 0 0 1.272L6.727 8l-2.164 2.164a.9.9 0 1 0 1.273 1.272L8 9.273l2.164 2.163a.9.9 0 0 0 1.272-1.272L9.273 8l2.163-2.164a.9.9 0 1 0-1.272-1.272L8 6.727 5.836 4.564a.9.9 0 0 0-1.273 0" clip-rule="evenodd" /></symbol>',16,16),ue=Y("Icon16SearchOutline","search_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="search_outline_16"><path fill="currentColor" d="M6.5 1a5.5 5.5 0 0 1 4.384 8.823l3.895 3.9a.75.75 0 0 1-1.061 1.06l-3.895-3.9A5.5 5.5 0 1 1 6.5 1m0 1.5a4 4 0 1 0 0 8 4 4 0 0 0 0-8" /></symbol>',16,16);const _e=(l=!1)=>{const[c,o]=n.useState(l),u=n.useCallback(()=>{o(!0)},[]),_=n.useCallback(()=>{o(!1)},[]),h=n.useCallback(()=>{o(i=>!i)},[]);return{value:c,setTrue:u,setFalse:_,toggle:h}},ve=(l,c)=>{S(()=>{if(!l.current)return;const o=l.current.closest("form");if(o)return o.addEventListener("reset",c),()=>{o.removeEventListener("reset",c)}},[l,c])},fe="_host_5yvb8_1",he="_rtl_5yvb8_11",be="_withPadding_5yvb8_15",me="_sizeYCompact_5yvb8_24",ye="_sizeYNone_5yvb8_29",xe="_field_5yvb8_34",pe="_label_5yvb8_57",Ce="_input_5yvb8_64",Ie="_nativeInput_5yvb8_77",je="_hasAfter_5yvb8_112",Be="_disabled_5yvb8_117",ge="_controls_5yvb8_137",we="_hasIcon_5yvb8_150",Ne="_hasValue_5yvb8_162",ze="_icon_5yvb8_166",Fe="_after_5yvb8_181",Ve="_focused_5yvb8_194",Ee="_afterTextClip_5yvb8_214",Me="_findButton_5yvb8_221",e={host:fe,rtl:he,withPadding:be,sizeYCompact:me,sizeYNone:ye,field:xe,label:pe,input:Ce,nativeInput:Ie,hasAfter:je,disabled:Be,controls:ge,hasIcon:we,hasValue:Ne,icon:ze,after:Fe,focused:Ve,afterTextClip:Ee,findButton:Me},Ae=({id:l,before:c=s.jsx(ue,{}),className:o,placeholder:u="Поиск",after:_="Отмена",getRef:h,icon:i,onIconClick:v,style:k,autoComplete:A="off",onChange:L,iconLabel:R,clearLabel:T="Очистить",clearButtonTestId:D,noPadding:H,getRootRef:O,findButtonText:q="Найти",findButtonTestId:J,onFindButtonClick:p,...a})=>{const $=ne()==="rtl",r=le(h),{value:G,setTrue:b,setFalse:m}=_e(!1),K=n.useId(),C=l||`search-${K}`,[y,x]=n.useState(()=>!!(a.value||a.defaultValue)),Q=t=>x(!!t.currentTarget.value),{sizeY:I="none"}=P(),{sizeY:j}=ce(),B=ee(),g=B==="ios"&&se(_),U=t=>{b(),a.onFocus&&a.onFocus(t)},W=t=>{m(),a.onBlur&&a.onBlur(t)},f=n.useCallback(()=>{var N,z;const t=(N=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:N.set;t==null||t.call(r.current,"");const d=new Event("input",{bubbles:!0});(z=r.current)==null||z.dispatchEvent(d)},[r]),X=n.useCallback(t=>v==null?void 0:v(t),[v]),Z=n.useCallback(t=>{var d;t.preventDefault(),(d=r.current)==null||d.focus(),ie()&&f()},[r,f]);S(()=>{a.value!==void 0&&x(!!a.value)},[a.value]),ve(r,()=>{x(!!a.defaultValue)});const w=(t,d={})=>s.jsxs(E,{hoverMode:"opacity",onPointerDown:X,className:e.icon,onFocus:b,onBlur:m,onClick:oe,...d,children:[s.jsx(V,{children:R}),t]});return s.jsxs("div",{className:F("vkuiInternalSearch",e.host,I==="none"&&e.sizeYNone,I==="compact"&&e.sizeYCompact,G&&e.focused,y&&e.hasValue,g&&e.hasAfter,i&&e.hasIcon,a.disabled&&e.disabled,!H&&e.withPadding,$&&e.rtl,o),ref:O,style:k,children:[s.jsxs("div",{className:e.field,children:[s.jsx("label",{htmlFor:C,className:e.label,children:u}),s.jsxs("div",{className:e.input,children:[c,s.jsx(re,{Component:"input",type:"search",level:"1",weight:"3",...a,id:C,placeholder:u,autoComplete:A,getRootRef:r,className:e.nativeInput,onFocus:U,onBlur:W,onChange:te(L,Q)})]}),s.jsxs("div",{className:e.controls,children:[i&&(typeof i=="function"?i(w):w(i)),s.jsxs(E,{hoverMode:"opacity",onPointerDown:Z,onClick:f,className:e.icon,tabIndex:y?void 0:-1,disabled:a.disabled,"data-testid":D,children:[s.jsx(V,{children:T}),B==="ios"?s.jsx(de,{}):s.jsx(ae,{})]}),j.compact&&p&&s.jsx(M,{mode:"primary",size:"m",className:F(e.findButton,j.compact.className),focusVisibleMode:"inside",onClick:p,tabIndex:y?void 0:-1,"data-testid":J,children:q})]})]}),g&&s.jsx("div",{className:e.after,children:s.jsx(M,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:f,onFocus:b,onBlur:m,children:s.jsx("span",{className:e.afterTextClip,children:_})})})]})};export{Ae as S,ve as a,_e as u};
