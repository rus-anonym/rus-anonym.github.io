import{m as Y,r as o,h as S,u as U,g as W,j as s,b as F,aD as Z,V,aB as P,v as ee,n as se}from"./index-r1diih1v.js";import{t as te,X as ae,an as ne,z as oe,c as E,B as M}from"./index-CdXxJyXX.js";var le=Y("Icon16Clear","clear_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="clear_16"><path fill-rule="evenodd" d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0M4.563 4.564a.9.9 0 0 0 0 1.272L6.727 8l-2.164 2.164a.9.9 0 1 0 1.273 1.272L8 9.273l2.164 2.163a.9.9 0 0 0 1.272-1.272L9.273 8l2.163-2.164a.9.9 0 1 0-1.272-1.272L8 6.727 5.836 4.564a.9.9 0 0 0-1.273 0" clip-rule="evenodd" /></symbol>',16,16),ce=Y("Icon16SearchOutline","search_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="search_outline_16"><path fill="currentColor" d="M6.5 1a5.5 5.5 0 0 1 4.384 8.823l3.895 3.9a.75.75 0 0 1-1.061 1.06l-3.895-3.9A5.5 5.5 0 1 1 6.5 1m0 1.5a4 4 0 1 0 0 8 4 4 0 0 0 0-8" /></symbol>',16,16);const ie=(l=!1)=>{const[c,n]=o.useState(l),d=o.useCallback(()=>{n(!0)},[]),h=o.useCallback(()=>{n(!1)},[]),m=o.useCallback(()=>{n(i=>!i)},[]);return{value:c,setTrue:d,setFalse:h,toggle:m}},re=(l,c)=>{S(()=>{if(!l.current)return;const n=l.current.closest("form");if(n)return n.addEventListener("reset",c),()=>{n.removeEventListener("reset",c)}},[l,c])},ue="_host_hhe22_1",de="_withPadding_hhe22_9",he="_sizeYCompact_hhe22_18",_e="_sizeYNone_hhe22_23",fe="_field_hhe22_28",me="_label_hhe22_51",ve="_input_hhe22_58",xe="_nativeInput_hhe22_71",be="_hasAfter_hhe22_106",pe="_disabled_hhe22_111",Ce="_controls_hhe22_131",Be="_hasIcon_hhe22_144",je="_hasValue_hhe22_149",ye="_icon_hhe22_153",Ie="_after_hhe22_168",we="_focused_hhe22_181",Ne="_afterTextClip_hhe22_201",ge="_findButton_hhe22_208",e={host:ue,withPadding:de,sizeYCompact:he,sizeYNone:_e,field:fe,label:me,input:ve,nativeInput:xe,hasAfter:be,disabled:pe,controls:Ce,hasIcon:Be,hasValue:je,icon:ye,after:Ie,focused:we,afterTextClip:Ne,findButton:ge},Ve=({id:l,before:c=s.jsx(ce,{}),className:n,placeholder:d="Поиск",after:h="Отмена",getRef:m,icon:i,onIconClick:_,style:k,autoComplete:A="off",onChange:L,iconLabel:T,clearLabel:R="Очистить",noPadding:D,getRootRef:H,findButtonText:O="Найти",onFindButtonClick:C,...a})=>{const r=te(m),{value:X,setTrue:v,setFalse:x}=ie(!1),$=o.useId(),B=l||`search-${$}`,[b,p]=o.useState(()=>!!(a.value||a.defaultValue)),q=t=>p(!!t.currentTarget.value),{sizeY:j="none"}=U(),{sizeY:y}=ae(),I=W(),w=I==="ios"&&ee(h),G=t=>{v(),a.onFocus&&a.onFocus(t)},J=t=>{x(),a.onBlur&&a.onBlur(t)},f=o.useCallback(()=>{var g,z;const t=(g=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:g.set;t==null||t.call(r.current,"");const u=new Event("input",{bubbles:!0});(z=r.current)==null||z.dispatchEvent(u)},[r]),K=o.useCallback(t=>_==null?void 0:_(t),[_]),Q=o.useCallback(t=>{var u;t.preventDefault(),(u=r.current)==null||u.focus(),ne()&&f()},[r,f]);S(()=>{a.value!==void 0&&p(!!a.value)},[a.value]),re(r,()=>{p(!!a.defaultValue)});const N=(t,u={})=>s.jsxs(E,{hoverMode:"opacity",onPointerDown:K,className:e.icon,onFocus:v,onBlur:x,onClick:se,...u,children:[s.jsx(V,{children:T}),t]});return s.jsxs("div",{className:F("vkuiInternalSearch",e.host,j==="none"&&e.sizeYNone,j==="compact"&&e.sizeYCompact,X&&e.focused,b&&e.hasValue,w&&e.hasAfter,i&&e.hasIcon,a.disabled&&e.disabled,!D&&e.withPadding,n),ref:H,style:k,children:[s.jsxs("div",{className:e.field,children:[s.jsx("label",{htmlFor:B,className:e.label,children:d}),s.jsxs("div",{className:e.input,children:[c,s.jsx(oe,{Component:"input",type:"search",level:"1",weight:"3",...a,id:B,placeholder:d,autoComplete:A,getRootRef:r,className:e.nativeInput,onFocus:G,onBlur:J,onChange:Z(L,q)})]}),s.jsxs("div",{className:e.controls,children:[i&&(typeof i=="function"?i(N):N(i)),s.jsxs(E,{hoverMode:"opacity",onPointerDown:Q,onClick:f,className:e.icon,tabIndex:b?void 0:-1,disabled:a.disabled,children:[s.jsx(V,{children:R}),I==="ios"?s.jsx(le,{}):s.jsx(P,{})]}),y.compact&&C&&s.jsx(M,{mode:"primary",size:"m",className:F(e.findButton,y.compact.className),focusVisibleMode:"inside",onClick:C,tabIndex:b?void 0:-1,children:O})]})]}),w&&s.jsx("div",{className:e.after,children:s.jsx(M,{mode:"tertiary",size:"m",focusVisibleMode:"inside",hoverMode:"opacity",activeMode:"opacity",onClick:f,onFocus:v,onBlur:x,children:s.jsx("span",{className:e.afterTextClip,children:h})})})]})};export{Ve as S,ie as a,re as u};
