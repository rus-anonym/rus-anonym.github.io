import{m as Y,j as n,R as D,b as M,V as Z,r as c,h as U,g as F,n as G}from"./index-C2AZRDLn.js";import{h as J,w as K,ap as Q}from"./index-Ds6OJqbK.js";var tt=Y("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" /></g></symbol>',16,24);const et="_host_fksue_1",nt="_directionLeft_fksue_15",ot="_directionRight_fksue_16",rt="_directionUp_fksue_21",st="_directionDown_fksue_22",it="_icon_fksue_27",ct="_sizeS_fksue_37",lt="_sizeM_fksue_43",at="_defaultIcon_fksue_73",S={host:et,directionLeft:nt,directionRight:ot,directionUp:rt,directionDown:st,icon:it,sizeS:ct,sizeM:lt,defaultIcon:at},dt={s:S.sizeS,m:S.sizeM},ut={up:S.directionUp,right:S.directionRight,down:S.directionDown,left:S.directionLeft},ft={up:"Назад",right:"Вперед",down:"Вперед",left:"Назад"},ht=({size:t})=>{let e=tt;return t==="s"&&(e=J),n.jsx(e,{className:S.defaultIcon})},H=({size:t="m",offsetY:e,direction:o,label:r,children:_=n.jsx(ht,{size:t}),...a})=>{const w=r??ft[o];return n.jsxs(D,{Component:"button",type:"button",baseClassName:M(S.host,dt[t],ut[o]),...a,children:[w&&n.jsx(Z,{children:w}),n.jsx("span",{className:S.icon,style:e?{top:e}:void 0,children:_})]})};function _t(){const t=c.useRef(null),[e,o]=c.useState(void 0),[r,_]=c.useState(void 0),{window:a}=U();return F(()=>{if(!a||!t.current)return;const C=a.getComputedStyle(t.current);o(C.direction),_(C.writingMode)},[a]),[t,e,r]}function wt(t){return .5*(1-Math.cos(Math.PI*t))}const pt="_host_9wc9i_1",mt="_inWrapper_9wc9i_27",gt="_arrow_9wc9i_33",St="_withConstArrows_9wc9i_44",Ct="_arrowLeft_9wc9i_50",xt="_arrowRight_9wc9i_54",L={host:pt,in:"_in_9wc9i_12",inWrapper:mt,arrow:gt,withConstArrows:St,arrowLeft:Ct,arrowRight:xt};function O(){return performance&&performance.now?performance.now():Date.now()}function V(t){return t>0?Math.ceil(t):Math.floor(t)}const $=t=>V(t.scrollLeft),Lt=250;function vt({scrollElement:t,getScrollPosition:e,animationQueue:o,onScrollToEndBorder:r,onScrollEnd:_,onScrollStart:a,initialScrollWidth:w,scrollAnimationDuration:C,textDirection:s}){if(!t||!e)return;const f=(s==="ltr"?1:-1)*(w-t.offsetWidth);let x=$(t),h=e(x);a(),x*h<0&&(h=0),Math.abs(h)>=Math.abs(f)&&(r(),h=f);const W=O();(function d(){const v=O(),u=Math.min((v-W)/C,1),m=wt(u),R=x+(h-x)*m;t.scrollLeft=V(R);const p=s==="ltr"?Math.max(0,h):Math.min(0,h);if($(t)!==p&&u!==1){requestAnimationFrame(d);return}_(),o.shift(),o.length>0&&o[0]()})()}const Rt=({children:t,getScrollToLeft:e,getScrollToRight:o,showArrows:r=!0,arrowSize:_="m",arrowOffsetY:a,scrollAnimationDuration:w=Lt,getRef:C,scrollOnAnyWheel:s=!1,prevButtonTestId:f,nextButtonTestId:x,...h})=>{const[W,d]=c.useState(!1),[v,u]=c.useState(!1),[m,R]=_t(),p=R||"ltr",A=p==="ltr"?d:u,j=p==="ltr"?u:d,T=c.useRef(!1),l=K(C,m),E=c.useRef([]),b=Q(),N=c.useCallback(g=>{const i=l.current;E.current.push(()=>{var k;return vt({scrollElement:i,getScrollPosition:g,animationQueue:E.current,onScrollToEndBorder:()=>j(!1),onScrollEnd:()=>T.current=!1,onScrollStart:()=>T.current=!0,initialScrollWidth:((k=i==null?void 0:i.firstElementChild)==null?void 0:k.scrollWidth)||0,scrollAnimationDuration:w,textDirection:p})}),E.current.length===1&&E.current[0]()},[l,w,p,j]),q=c.useCallback(()=>{N(e??(i=>i-l.current.offsetWidth))},[e,N,l]),X=c.useCallback(()=>{N(o??(i=>i+l.current.offsetWidth))},[o,N,l]),I=c.useCallback(()=>{if(r&&b&&l.current&&!T.current){const g=l.current;A(g.scrollLeft!==0),j(Math.abs($(g))+g.offsetWidth<g.scrollWidth)}},[r,b,l,A,j]);return c.useEffect(I,[I,t]),F(function(){const i=l.current;if(!i)return G;const k=B=>{l.current.scrollBy({left:B.deltaX+B.deltaY,behavior:"auto"}),B.preventDefault()},P={passive:!1};return s&&i.addEventListener("wheel",k,P),i.addEventListener("scroll",I,P),()=>{s&&i.removeEventListener("wheel",k,P),i.removeEventListener("scroll",I,P)}},[s,I,l]),n.jsxs(D,{...h,baseClassName:M(L.host,"vkuiInternalHorizontalScroll",r==="always"&&L.withConstArrows),onMouseEnter:I,children:[r&&(b||b===void 0)&&W&&n.jsx(H,{"data-testid":f,size:_,offsetY:a,direction:"left","aria-hidden":!0,tabIndex:-1,className:M(L.arrow,L.arrowLeft),onClick:q}),r&&(b||b===void 0)&&v&&n.jsx(H,{"data-testid":x,size:_,offsetY:a,direction:"right","aria-hidden":!0,tabIndex:-1,className:M(L.arrow,L.arrowRight),onClick:X}),n.jsx("div",{className:L.in,ref:l,children:n.jsx("div",{className:L.inWrapper,children:t})})]})},bt="_host_ud7gc_1",It="_modeShadow_ud7gc_9",Mt="_modeOutline_ud7gc_18",Wt="_modePlain_ud7gc_19",kt="_withBorder_ud7gc_23",y={host:bt,modeShadow:It,modeOutline:Mt,modePlain:Wt,withBorder:kt},Dt=({mode:t="tint",Component:e="li",...o})=>{const r=t==="outline"||t==="outline-tint";return n.jsx(D,{...o,Component:e,baseClassName:M(y.host,t==="outline"&&y.modeOutline,t==="shadow"&&y.modeShadow,t==="plain"&&y.modePlain,r&&y.withBorder)})},yt="_host_1nbz3_1",zt="_gap_1nbz3_13",jt="_withPaddings_1nbz3_23",z={host:yt,in:"_in_1nbz3_7",gap:zt,withPaddings:jt},Et={s:"vkuiInternalCardScroll--size-s",m:"vkuiInternalCardScroll--size-m",l:"vkuiInternalCardScroll--size-l"},Tt=({children:t,size:e="s",showArrows:o=!0,padding:r=!1,Component:_="ul",prevButtonTestId:a,nextButtonTestId:w,...C})=>{const s=c.useRef(null),f=c.useRef(null),{window:x}=U();function h(d){if(!s.current||!f.current)return d;const v=s.current.offsetWidth,u=[...s.current.children].findIndex(p=>p.offsetLeft+p.offsetWidth+parseInt(x.getComputedStyle(p).marginRight)-d>=0);if(u===-1)return d;if(u===0)return 0;const m=s.current.children[u],R=m.offsetLeft-(v-m.offsetWidth)+f.current.offsetWidth;return R<=2*f.current.offsetWidth?0:R}function W(d){if(!s.current||!f.current)return d;const v=s.current.offsetWidth,u=Array.prototype.find.call(s.current.children,m=>m.offsetLeft+m.offsetWidth-d>v);return u?u.offsetLeft-f.current.offsetWidth:d}return n.jsx(D,{...C,Component:_,baseClassName:M(z.host,"vkuiInternalCardScroll",e!==!1&&Et[e],r&&z.withPaddings),children:n.jsx(Rt,{getScrollToLeft:h,getScrollToRight:W,showArrows:o,prevButtonTestId:a,nextButtonTestId:w,children:n.jsxs("div",{className:z.in,ref:s,children:[n.jsx("span",{className:z.gap,ref:f}),t,n.jsx("span",{className:z.gap})]})})})};export{Tt as C,Dt as a};
