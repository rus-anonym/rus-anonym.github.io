import{u as ee,r as i,j as c,R as pe,e as te,x as X,aj as de,V as fe,aT as J,a8 as $,a7 as me,D as he,ap as I,aW as Ce}from"./index-DXObVkYb.js";import{a7 as ve,a8 as _e,am as se,I as be,y as xe,a4 as ye,$ as Ne,an as ge,ao as ke}from"./index-Dydb4pI3.js";import{a as Ee}from"./Search-6Au3xrdh.js";const Ie="_host_1owoa_1",Oe="_removable_1owoa_12",Re="_content_1owoa_31",je="_sizeYCompact_1owoa_45",ze="_sizeYNone_1owoa_54",Te="_remove_1owoa_68",Fe="_before_1owoa_80",Ve="_after_1owoa_85",N={host:Ie,in:"_in_1owoa_11",removable:Oe,content:Re,sizeYCompact:je,sizeYNone:ze,remove:Te,before:Fe,after:Ve},Ye={none:N.sizeYNone,compact:N.sizeYCompact},De=({Component:e="span",value:s="",removable:o=!0,onRemove:n,removeLabel:p="Удалить",before:m,after:z,disabled:b,readOnly:g,children:k,className:E,onFocus:T,onBlur:h,...x})=>{const{sizeY:F="none"}=ee(),{focusVisible:O,onFocus:u,onBlur:d}=ve(),R=_e({focusVisible:O}),j=f=>{T&&T(f),u(f)},L=f=>{h&&h(f),d(f)},V=i.useCallback(f=>{n==null||n(f,s)},[n,s]);return c.jsxs(pe,{...x,Component:e,className:te(N.host,F!=="regular"&&Ye[F],R,E),"aria-readonly":g,"aria-disabled":b,onFocus:b?void 0:j,onBlur:b?void 0:L,children:[c.jsxs("div",{className:N.in,children:[X(m)&&c.jsx("div",{className:N.before,children:m}),c.jsx(de,{className:N.content,children:k}),X(z)&&c.jsx("div",{className:N.after,children:z})]}),!g&&o&&c.jsx("div",{className:N.removable,children:c.jsxs("button",{tabIndex:-1,disabled:b,className:N.remove,onClick:b?void 0:V,children:[c.jsxs(fe,{children:["  ",p," ",k]}),c.jsx(se,{})]})})]})},Le=({className:e,onClick:s,...o})=>c.jsx(be,{Component:"button",label:"Очистить поле",onKeyDown:J,type:"button",activeMode:"opacity",hoverMode:"opacity",...o,className:e,onClick:n=>{J(n),n.preventDefault(),s()},children:c.jsx(se,{})}),W=[],K="";function we(e){return e.value}function Ae(e){return e.label}function Be(e,s){return{value:e,label:s}}function Pe(e){const{label:s,...o}=e;return c.jsx(De,{removable:!e.disabled,...o,children:s})}const ne=e=>typeof e=="object"&&"value"in e,Q=e=>e?e.value===K:!0,$e=(e,s)=>{const o=ne(e)?e.value:e;return s.findIndex(n=>n.value===o)},M=e=>{const s=e&&e.dataset.index;return typeof s=="string"?Number(s):-1},He=e=>{const s=e&&e.dataset.value;return(e&&e.dataset.valueType)==="number"?Number(s):typeof s=="string"?s:-1},Me=(e,s,o)=>{const n=o-1;switch(s){case"prev":const p=e-1;return p<0?n:p;case"next":const m=e+1;return m>n?0:m;case"last":return n;default:return-1}},We="_host_8ik46_1",Ke="_chip_8ik46_17",Se="_el_8ik46_22",Ue="_hasPlaceholder_8ik46_64",Ge="_sizeYCompact_8ik46_74",qe="_sizeYNone_8ik46_79",D={host:We,chip:Ke,el:Se,hasPlaceholder:Ue,sizeYCompact:Ge,sizeYNone:qe},Xe={none:D.sizeYNone,compact:D.sizeYCompact},tt=({getRootRef:e,style:s,className:o,before:n,after:p,status:m,mode:z,maxHeight:b,value:g=W,onAddChipOption:k,onRemoveChipOption:E,renderChip:T=Pe,getRef:h,id:x,inputValue:F=K,placeholder:O,disabled:u,readOnly:d,addOnBlur:R,onBlur:j,onInputChange:L,ClearButton:V=Le,clearButtonShown:f,clearButtonTestId:A,onClear:B,...l})=>{const{sizeY:y="none"}=ee(),Y=i.useId(),r=xe(h),C=i.useRef(null),_=g.length,v=_===0,[S,w]=i.useState(0),ae=t=>{w(0),t.focus()},P=(t,a,ie)=>{const G=Me(t,a,_),q=ie.querySelector(`[data-index="${G}"]`);q&&(w(G),q.focus())},U=(t,a)=>{!r.current||!C.current||(_>1?a===_-1?P(a,"prev",C.current):P(a,"next",C.current):ae(r.current),E(t))},oe=t=>{const a=t.target;if(!(t.defaultPrevented||!C.current||!he(a)))switch(t.key){case I.ENTER:{!d&&$(a,r.current)&&r.current&&!Q(r.current)&&(t.preventDefault(),k(r.current.value));break}case I.DELETE:case I.BACKSPACE:{!d&&_>0&&($(a,r.current)?t.key===I.BACKSPACE&&Q(r.current)&&(t.preventDefault(),P(M(a),"last",C.current)):(t.preventDefault(),U(He(a),M(a))));break}case I.ARROW_UP:case I.ARROW_LEFT:case I.ARROW_DOWN:case I.ARROW_RIGHT:{_!==0&&!$(a,r.current)&&(t.preventDefault(),P(M(a),Ce(t.key),C.current));break}}},re=t=>{j&&j(t),R&&!t.defaultPrevented&&r.current&&k(r.current.value)},ce=(t,a)=>{t.preventDefault(),t.stopPropagation(),U(a,$e(a,g))},ue=t=>{t.defaultPrevented||$(t.currentTarget,me(t.currentTarget))||r.current&&r.current.focus()},H=i.useMemo(()=>{if(f)return c.jsx(V,{onClick:B,disabled:u,"data-testid":A})},[V,f,A,u,B]),le=i.useMemo(()=>{if(H||p)return c.jsxs(c.Fragment,{children:[H,p]})},[p,H]);return c.jsx(ye,{Component:"div",getRootRef:e,style:s,disabled:u,before:n,after:le,status:m,mode:z,className:o,maxHeight:b,onClick:u?void 0:ue,children:c.jsxs("div",{className:te(D.host,y!=="regular"&&Xe[y],v&&D.hasPlaceholder),ref:C,role:"listbox","aria-orientation":"horizontal","aria-disabled":u,"aria-readonly":d,onKeyDown:u?void 0:oe,children:[g.map((t,a)=>c.jsx(i.Fragment,{children:T({Component:"div",value:t.value,label:t.label,disabled:t.disabled||u,readOnly:t.readOnly||d,className:D.chip,onRemove:ce,"data-index":a,"data-value":t.value,"data-value-type":typeof t.value,tabIndex:S===a?0:-1,role:"option","aria-selected":!0,"aria-posinset":a+1,"aria-setsize":_},t)},`${typeof t.value}-${t.value}`)),c.jsx(Ne,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:!1,...l,Component:"input",type:"text",id:x||`chips-input-base-generated-id-${Y}`,getRootRef:r,className:D.el,disabled:u,readOnly:d,placeholder:v?O:void 0,value:F,onChange:L,onBlur:re})]})})},Je=(e,s="")=>{try{const o=e.value;e.value=s;const n=e._valueTracker;n&&n.setValue(o);const p=new Event("input",{bubbles:!0});e.dispatchEvent(p)}catch{}},Z=(e,s,o)=>e.map(n=>({...n,label:o(n),value:s(n)})),st=({value:e,defaultValue:s=W,onChange:o,getOptionLabel:n=Ae,getOptionValue:p=we,getNewOptionData:m=Be,inputValue:z,defaultInputValue:b=K,onInputChange:g,disabled:k,delimiter:E})=>{const[T,h]=ge({disabled:k,value:e?Z(e,p,n):void 0,defaultValue:Z(s,p,n),onChange:o}),x=i.useRef(null),[F,O]=ke({disabled:k,value:z,defaultValue:b,onChange:g}),u=i.useCallback((l,y)=>{h(Y=>{const r=new Set,C=l.map(v=>{const w=ne(v)?m(v.value,v.label):m(v,typeof v=="string"?v:"");return r.add(w.value),w}),_=Y.filter(v=>!r.has(v.value));return y&&_.push(...C),_})},[h,m]),d=i.useCallback(()=>{x.current&&Je(x.current,"")},[x]),R=i.useCallback(l=>u([l],!0),[u]),j=i.useCallback(l=>u(l,!0),[u]),L=i.useCallback(l=>u([l],!1),[u]),V=i.useCallback(l=>{const y=l.trim();y&&(R(y),d())},[R,d]),f=i.useCallback(()=>{h(s)},[s,h]),A=i.useCallback(()=>{h(W),d()},[d,h]),B=i.useCallback((l,y=!0)=>{const Y=l.target.value;if(!E||!Y.includes(E)||!y){O(l);return}const r=Y.trim().split(E).map(C=>C.trim()).filter(Boolean);l.target.value="",l.currentTarget.value="",O(l),j(r)},[j,E,O]);return Ee(x,f),{value:T,addOption:R,addOptionFromInput:V,removeOption:L,inputRef:x,inputValue:F,onInputChange:B,clearInput:d,clearOptions:A}};export{tt as C,K as D,we as a,Be as b,W as c,Ae as g,Pe as r,Z as t,st as u};
