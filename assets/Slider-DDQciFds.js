import{r as d,j as f,b as x,aT as ht,u as gt,q as $,p as bt}from"./index-BSa9nLCW.js";import{a7 as vt,a8 as mt,a9 as St,aa as yt,ab as zt,ac as Rt,r as Et,x as it,ad as Ct,y as Nt,ae as Ft,af as Vt}from"./index-C24b8zzd.js";import{u as wt}from"./Search-CPXZB-Fw.js";const Mt="_host_1r02q_1",Tt="_focusVisible_1r02q_17",Dt="_hover_1r02q_22",It="_active_1r02q_26",jt="_nativeInput_1r02q_34",N={host:Mt,focusVisible:Tt,hover:Dt,active:It,nativeInput:jt},at=({className:s,getRootRef:t,inputProps:e,withTooltip:n,isActive:o,...u})=>{const{focusVisible:r,onBlur:R,onFocus:F}=vt(),g=mt({focusVisible:r,mode:N.focusVisible}),[p,B]=d.useState(null),P=d.useMemo(()=>[St({crossAxis:0,mainAxis:15}),yt(),zt({padding:8}),Rt({element:p})],[p]),{x:b,y:V,placement:Y,refs:w,strategy:k,middlewareData:{arrow:M},update:X}=Et({placement:"top",middleware:P}),{value:v,setTrue:m,setFalse:T}=wt(!1),D=it(t,w.setReference),c=n&&(r||v||o),i=e&&e.value;return d.useEffect(function(){c&&i!=="undefined"&&X()},[i,X,c]),f.jsxs(d.Fragment,{children:[f.jsx("span",{...u,ref:D,onMouseEnter:m,onMouseLeave:T,className:x(N.host,g,o&&N.active,v&&N.hover,s),children:f.jsx("input",{...e,type:"range",className:N.nativeInput,"aria-orientation":"horizontal",onBlur:R,onFocus:F})}),c&&f.jsx(Ct,{appearance:"neutral",getRootRef:w.setFloating,style:Nt({strategy:k,x:b,y:V}),arrowProps:{coords:M,placement:Y,getRootRef:B},description:i})]})},nt=(s,t,e)=>(s-t)/(e-t)*100,rt=(s,t,e,n,o)=>ht(s,[0,t],[e,n],{step:o}),H=(s,t,e)=>s<t?t:s>e?e:s,ot=(s,t,e,n,o)=>{const[u,r]=s;if(r===null)return[H(t,e,n),null];switch(o){case"start":return t>r?[r,r]:[H(t,e,n),r];case"end":return t<u?[u,u]:[u,H(t,e,n)];case null:default:return s}},xt=(s,t,e)=>{const[n,o]=s;switch(e){case"start":return[t,o];case"end":return[n,t];case null:default:return s}};function Bt(s){return s[1]!==null}const Pt=(s,t,e)=>{if(e==="start")return"start";if(e==="end")return"end";const[n,o]=s,u=.1,r=o!==null?n-u:n,R=o!==null?o+u:0;return Math.abs(r-t)<=Math.abs(R-t)?"start":"end"},lt=s=>{if(s){if(s.dataset.type==="start")return"start";if(s.dataset.type==="end")return"end"}return null},Yt={"aria-label":void 0,"aria-valuetext":void 0,"aria-labelledby":void 0},kt=s=>{const t=s["aria-label"],e=s["aria-valuetext"],n=s["aria-labelledby"];return{...s,...Yt,ariaLabel:t,ariaValueText:e,ariaLabelledBy:n}},Xt="_host_18uul_1",At="_disabled_18uul_10",Lt="_track_18uul_15",qt="_trackFill_18uul_16",Wt="_multiple_18uul_34",$t="_thumbs_18uul_40",Ht="_thumb_18uul_40",Ot="_rtl_18uul_52",Ut="_thumbStart_18uul_56",Gt="_thumbEnd_18uul_60",Jt="_sizeL_18uul_64",Kt="_sizeM_18uul_68",Qt="_sizeS_18uul_72",Zt="_sizeYCompact_18uul_80",te="_sizeYNone_18uul_93",l={host:Xt,disabled:At,track:Lt,trackFill:qt,multiple:Wt,thumbs:$t,thumb:Ht,rtl:Ot,thumbStart:Ut,thumbEnd:Gt,sizeL:Jt,sizeM:Kt,sizeS:Qt,sizeYCompact:Zt,sizeYNone:te},ee={none:l.sizeYNone,compact:l.sizeYCompact},se={l:l.sizeL,m:l.sizeM,s:l.sizeS},oe=({step:s=1,min:t=0,max:e=100,value:n,multiple:o,defaultValue:u=o?[t,e]:t,disabled:r,className:R,getRootRef:F,getAriaLabel:g,getAriaValueText:p,startThumbTestId:B,endThumbTestId:P,onChange:b,withTooltip:V,size:Y="l",style:w,...k})=>{const{sizeY:M="none"}=gt(),v=Ft()==="rtl",m=n!==void 0,[T,D]=d.useState(u),c=d.useMemo(()=>{const a=m?n:T;return Array.isArray(a)?[$(a[0],t,e),$(a[1],t,e)]:[$(a,t,e),null]},[m,n,T,t,e]),[i,_]=c,S=o&&_!==null,O=nt(i,t,e),ut=S?nt(_,t,e):0,[U,G]=d.useState(null),y=d.useRef({dragging:null,startX:0,containerWidth:0}).current,A=it(F),L=d.useRef(null),q=d.useRef(null),{ariaLabel:J,ariaValueText:K,ariaLabelledBy:Q,...ct}=kt(k),W=(a,z)=>{r||c[0]===a[0]&&c[1]===a[1]||(o?Bt(a)&&(!m&&D(a),b&&b(a,z)):(!m&&D(a[0]),b&&b(a[0],z)))},dt=a=>{if(!A.current)return;const{left:z,width:E}=A.current.getBoundingClientRect(),C=lt(a.originalEvent.target);let h=a.startX-z;v&&(h=E-h);const I=rt(h,E,t,e,s),j=Pt(c,I,C);y.dragging=j,y.containerWidth=E,y.startX=h;const tt=ot(c,I,t,e,j),[et,st]=tt;L.current&&(C==="start"||et!==i&&st===_)?(L.current.focus(),a.originalEvent.preventDefault()):q.current&&(C==="end"||st!==_&&et===i)&&(q.current.focus(),a.originalEvent.preventDefault()),W(tt,a),a.originalEvent.stopPropagation(),G(y.dragging)},ft=a=>{const{startX:z,containerWidth:E,dragging:C}=y,{shiftX:h=0}=a,I=z+(v?-h:h),j=rt(I,E,t,e,s);W(ot(c,j,t,e,C),a),a.originalEvent.stopPropagation(),a.originalEvent.preventDefault()},_t=a=>{y.dragging=null,a.originalEvent.stopPropagation(),G(null)},Z=a=>{W(xt(c,Number(a.target.value),lt(a.target)),a)},pt={"--vkui_internal--Slider_start_value":String(O),"--vkui_internal--Slider_end_value":String(ut)};return f.jsxs(Vt,{"data-value":S?`${i},${_}`:i,...ct,className:x(l.host,r&&l.disabled,M!=="regular"&&ee[M],se[Y],S&&l.multiple,v&&l.rtl,R),style:bt(w,pt),getRootRef:F,onStart:r?void 0:dt,onMove:r?void 0:ft,onEnd:r?void 0:_t,children:[f.jsx("div",{className:l.track}),f.jsx("div",{className:l.trackFill}),f.jsxs("div",{ref:A,className:l.thumbs,children:[f.jsx(at,{"data-type":"start",className:x(l.thumb,l.thumbStart),style:{zIndex:S&&O>=50?2:void 0},withTooltip:V,inputProps:{"data-type":"start","data-testid":B,ref:L,step:s,min:t,value:i,max:S?_:e,disabled:r,"aria-label":g?g(0):J,"aria-valuetext":p?p(i,0):K,"aria-labelledby":Q,onChange:Z},isActive:U==="start"}),S&&f.jsx(at,{"data-type":"end",className:x(l.thumb,l.thumbEnd),withTooltip:V,inputProps:{"data-type":"end","data-testid":P,ref:q,step:s,min:i,value:_,max:e,disabled:r,"aria-label":g?g(1):J,"aria-valuetext":p?p(_,1):K,"aria-labelledby":Q,onChange:Z},isActive:U==="end"})]})]})};export{oe as S};
