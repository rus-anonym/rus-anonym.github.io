import{u as Z,r as i,j as c,R as de,b as ee,v as q,ah as pe,V as fe,aQ as Q,a6 as V,a5 as me,B as he,an as N,aT as Ce}from"./index-qVLION_7.js";import{a7 as _e,a8 as ve,am as te,I as be,x as xe,a4 as Ne,$ as ke,an as ge,ao as ye}from"./index-BPTW7plB.js";import{a as Ee}from"./Search-CEvo4szv.js";const Ie="_host_1owoa_1",Re="_removable_1owoa_12",ze="_content_1owoa_31",je="_sizeYCompact_1owoa_45",Fe="_sizeYNone_1owoa_54",Oe="_remove_1owoa_68",Ye="_before_1owoa_80",Te="_after_1owoa_85",_={host:Ie,in:"_in_1owoa_11",removable:Re,content:ze,sizeYCompact:je,sizeYNone:Fe,remove:Oe,before:Ye,after:Te},De={none:_.sizeYNone,compact:_.sizeYCompact},Le=({Component:e="span",value:s="",removable:r=!0,onRemove:n,removeLabel:d="Удалить",before:p,after:E,disabled:C,readOnly:v,children:b,className:O,onFocus:f,onBlur:h,...Y})=>{const{sizeY:I="none"}=Z(),{focusVisible:x,onFocus:l,onBlur:m}=_e(),T=ve({focusVisible:x}),R=a=>{f&&f(a),l(a)},D=a=>{h&&h(a),m(a)},z=i.useCallback(a=>{n==null||n(a,s)},[n,s]);return c.jsxs(de,{...Y,Component:e,className:ee(_.host,I!=="regular"&&De[I],T,O),"aria-readonly":v,"aria-disabled":C,onFocus:C?void 0:R,onBlur:C?void 0:D,children:[c.jsxs("div",{className:_.in,children:[q(p)&&c.jsx("div",{className:_.before,children:p}),c.jsx(pe,{className:_.content,children:b}),q(E)&&c.jsx("div",{className:_.after,children:E})]}),!v&&r&&c.jsx("div",{className:_.removable,children:c.jsxs("button",{tabIndex:-1,disabled:C,className:_.remove,onClick:C?void 0:z,children:[c.jsxs(fe,{children:["  ",d," ",b]}),c.jsx(te,{})]})})]})},Ae=({className:e,onClick:s,...r})=>c.jsx(be,{Component:"button",label:"Очистить поле",onKeyDown:Q,type:"button",activeMode:"opacity",hoverMode:"opacity",...r,className:e,onClick:n=>{Q(n),n.preventDefault(),s()},children:c.jsx(te,{})}),M=[],K="";function we(e){return e.value}function Be(e){return e.label}function Ve(e,s){return{value:e,label:s}}function $e(e){const{label:s,...r}=e;return c.jsx(Le,{removable:!e.disabled,...r,children:s})}const se=e=>typeof e=="object"&&"value"in e,X=e=>e?e.value===K:!0,He=(e,s)=>{const r=se(e)?e.value:e;return s.findIndex(n=>n.value===r)},H=e=>{const s=e&&e.dataset.index;return typeof s=="string"?Number(s):-1},Me=e=>{const s=e&&e.dataset.value;return typeof s=="string"?s:-1},Ke=(e,s,r)=>{const n=r-1;switch(s){case"prev":const d=e-1;return d<0?n:d;case"next":const p=e+1;return p>n?0:p;case"last":return n;default:return-1}},Ue="_host_8ik46_1",We="_chip_8ik46_17",Pe="_el_8ik46_22",Se="_hasPlaceholder_8ik46_64",Ge="_sizeYCompact_8ik46_74",qe="_sizeYNone_8ik46_79",F={host:Ue,chip:We,el:Pe,hasPlaceholder:Se,sizeYCompact:Ge,sizeYNone:qe},Qe={none:F.sizeYNone,compact:F.sizeYCompact},tt=({getRootRef:e,style:s,className:r,before:n,after:d,status:p,mode:E,maxHeight:C,value:v=M,onAddChipOption:b,onRemoveChipOption:O,renderChip:f=$e,getRef:h,id:Y,inputValue:I=K,placeholder:x,disabled:l,readOnly:m,addOnBlur:T,onBlur:R,onInputChange:D,ClearButton:z=Ae,clearButtonShown:a,clearButtonTestId:k,onClear:L,...A})=>{const{sizeY:j="none"}=Z(),w=i.useId(),u=xe(h),g=i.useRef(null),y=v.length,U=y===0,[ne,W]=i.useState(0),ae=t=>{W(0),t.focus()},B=(t,o,ie)=>{const S=Ke(t,o,y),G=ie.querySelector(`[data-index="${S}"]`);G&&(W(S),G.focus())},P=(t,o)=>{!u.current||!g.current||(y>1?o===y-1?B(o,"prev",g.current):B(o,"next",g.current):ae(u.current),O(t))},oe=t=>{const o=t.target;if(!(t.defaultPrevented||!g.current||!he(o)))switch(t.key){case N.ENTER:{!m&&V(o,u.current)&&u.current&&!X(u.current)&&(t.preventDefault(),b(u.current.value));break}case N.DELETE:case N.BACKSPACE:{!m&&y>0&&(V(o,u.current)?t.key===N.BACKSPACE&&X(u.current)&&(t.preventDefault(),B(H(o),"last",g.current)):(t.preventDefault(),P(Me(o),H(o))));break}case N.ARROW_UP:case N.ARROW_LEFT:case N.ARROW_DOWN:case N.ARROW_RIGHT:{y!==0&&!V(o,u.current)&&(t.preventDefault(),B(H(o),Ce(t.key),g.current));break}}},ce=t=>{R&&R(t),T&&!t.defaultPrevented&&u.current&&b(u.current.value)},re=(t,o)=>{t.preventDefault(),t.stopPropagation(),P(o,He(o,v))},le=t=>{t.defaultPrevented||V(t.currentTarget,me(t.currentTarget))||u.current&&u.current.focus()},$=i.useMemo(()=>{if(a)return c.jsx(z,{onClick:L,disabled:l,"data-testid":k})},[z,a,k,l,L]),ue=i.useMemo(()=>{if($||d)return c.jsxs(c.Fragment,{children:[$,d]})},[d,$]);return c.jsx(Ne,{Component:"div",getRootRef:e,style:s,disabled:l,before:n,after:ue,status:p,mode:E,className:r,maxHeight:C,onClick:l?void 0:le,children:c.jsxs("div",{className:ee(F.host,j!=="regular"&&Qe[j],U&&F.hasPlaceholder),ref:g,role:"listbox","aria-orientation":"horizontal","aria-disabled":l,"aria-readonly":m,onKeyDown:l?void 0:oe,children:[v.map((t,o)=>c.jsx(i.Fragment,{children:f({Component:"div",value:t.value,label:t.label,disabled:t.disabled||l,readOnly:t.readOnly||m,className:F.chip,onRemove:re,"data-index":o,"data-value":t.value,tabIndex:ne===o?0:-1,role:"option","aria-selected":!0,"aria-posinset":o+1,"aria-setsize":y},t)},`${typeof t.value}-${t.value}`)),c.jsx(ke,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:!1,...A,Component:"input",type:"text",id:Y||`chips-input-base-generated-id-${w}`,getRootRef:u,className:F.el,disabled:l,readOnly:m,placeholder:U?x:void 0,value:I,onChange:D,onBlur:ce})]})})},Xe=(e,s="")=>{try{const r=e.value;e.value=s;const n=e._valueTracker;n&&n.setValue(r);const d=new Event("input",{bubbles:!0});e.dispatchEvent(d)}catch{}},J=(e,s,r)=>e.map(n=>({...n,label:r(n),value:s(n)})),st=({value:e,defaultValue:s=M,onChange:r,getOptionLabel:n=Be,getOptionValue:d=we,getNewOptionData:p=Ve,inputValue:E,defaultInputValue:C=K,onInputChange:v,disabled:b})=>{const[O,f]=ge({disabled:b,value:e?J(e,d,n):void 0,defaultValue:J(s,d,n),onChange:r}),h=i.useRef(null),[Y,I]=ye({disabled:b,value:E,defaultValue:C,onChange:v}),x=i.useCallback((a,k)=>{f(L=>{const A=se(a),j=A?p(a.value,a.label):p(a,typeof a=="string"?a:""),w=L.filter(u=>j.value!==u.value);return k===!0&&w.push(A?{...a,...j}:j),w})},[f,p]),l=i.useCallback(()=>{h.current&&Xe(h.current,"")},[h]),m=i.useCallback(a=>x(a,!0),[x]),T=i.useCallback(a=>x(a,!1),[x]),R=i.useCallback(a=>{const k=a.trim();k&&(m(k),l())},[m,l]),D=i.useCallback(()=>{f(s)},[s,f]),z=i.useCallback(()=>{f(M),l()},[l,f]);return Ee(h,D),{value:O,addOption:m,addOptionFromInput:R,removeOption:T,inputRef:h,inputValue:Y,onInputChange:I,clearInput:l,clearOptions:z}};export{tt as C,K as D,we as a,Ve as b,M as c,Be as g,$e as r,J as t,st as u};
