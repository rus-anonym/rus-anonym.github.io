import{m as X,j as a,R as B,b as y,V as Y,r as f,y as Z,g as G,n as J,h as K}from"./index-BSa9nLCW.js";import{ae as O,h as Q,ar as tt,as as nt,x as et}from"./index-C24b8zzd.js";var ot=X("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" /></g></symbol>',16,24);const rt="_host_1tbo0_1",st="_directionLeft_1tbo0_15",it="_directionRight_1tbo0_16",ct="_directionUp_1tbo0_21",lt="_directionDown_1tbo0_22",at="_icon_1tbo0_27",dt="_sizeS_1tbo0_37",ut="_sizeM_1tbo0_43",ft="_rtl_1tbo0_73",ht="_defaultIcon_1tbo0_73",p={host:rt,directionLeft:st,directionRight:it,directionUp:ct,directionDown:lt,icon:at,sizeS:dt,sizeM:ut,rtl:ft,defaultIcon:ht},_t={s:p.sizeS,m:p.sizeM},pt={up:p.directionUp,right:p.directionRight,down:p.directionDown,left:p.directionLeft},mt={up:"Назад",right:"Вперед",down:"Вперед",left:"Назад"},wt=({size:t})=>{let n=ot;return t==="s"&&(n=Q),a.jsx(n,{className:p.defaultIcon})},H=({size:t="m",offsetY:n,direction:c,label:l,children:g=a.jsx(wt,{size:t}),...C})=>{const x=O(),b=l??mt[c];return a.jsxs(B,{Component:"button",type:"button",baseClassName:y(p.host,_t[t],pt[c],x==="rtl"&&p.rtl),...C,children:[b&&a.jsx(Y,{children:b}),a.jsx("span",{className:p.icon,style:n?{top:n}:void 0,children:g})]})};function St(t=!0){const{hasPointer:n}=f.useContext(Z);return!tt(!(t||n===void 0))||n!==void 0?n:nt}function gt(t){return .5*(1-Math.cos(Math.PI*t))}const Ct="_host_2uxda_1",xt="_rtl_2uxda_14",bt="_inWrapper_2uxda_33",vt="_arrow_2uxda_39",It="_withConstArrows_2uxda_50",Lt="_arrowLeft_2uxda_56",Rt="_arrowRight_2uxda_60",S={host:Ct,rtl:xt,in:"_in_2uxda_18",inWrapper:bt,arrow:vt,withConstArrows:It,arrowLeft:Lt,arrowRight:Rt};function F(){return performance&&performance.now?performance.now():Date.now()}function U(t){return t>0?Math.ceil(t):Math.floor(t)}const A=t=>U(t.scrollLeft),yt=250;function Wt({scrollElement:t,getScrollPosition:n,animationQueue:c,onScrollToEndBorder:l,onScrollEnd:g,onScrollStart:C,initialScrollWidth:x,scrollAnimationDuration:b,textDirection:e}){if(!t||!n)return;const L=(e==="ltr"?1:-1)*(x-t.offsetWidth),h=A(t),R=h*(e==="rtl"?-1:1);let i=n(R);const E=i-R;e==="rtl"&&(i=h-E),C(),h*i<0&&(i=0),Math.abs(i)>=Math.abs(L)&&(l(),i=L);const P=F();(function r(){const m=F(),d=Math.min((m-P)/b,1),_=gt(d),u=h+(i-h)*_;t.scrollLeft=U(u);const v=e==="ltr"?Math.max(0,i):Math.min(0,i);if(A(t)!==v&&d!==1){requestAnimationFrame(r);return}g(),c.shift(),c.length>0&&c[0]()})()}const zt=({children:t,getScrollToLeft:n,getScrollToRight:c,showArrows:l=!0,arrowSize:g="m",arrowOffsetY:C,scrollAnimationDuration:x=yt,getRef:b,scrollOnAnyWheel:e=!1,prevButtonTestId:L,nextButtonTestId:h,ContentWrapperComponent:R="div",contentWrapperRef:i,contentWrapperClassName:E,...P})=>{const[r,m]=f.useState(!1),[d,_]=f.useState(!1),u=O(),v=u==="rtl",W=f.useRef(!1),o=et(b),I=f.useRef([]),z=St(),T=f.useCallback(w=>{const s=o.current;I.current.push(()=>{var j;return Wt({scrollElement:s,getScrollPosition:w,animationQueue:I.current,onScrollToEndBorder:()=>_(!1),onScrollEnd:()=>W.current=!1,onScrollStart:()=>W.current=!0,initialScrollWidth:((j=s==null?void 0:s.firstElementChild)==null?void 0:j.scrollWidth)||0,scrollAnimationDuration:x,textDirection:u})}),I.current.length===1&&I.current[0]()},[o,x,u,_]),V=f.useCallback(()=>{T(n??(s=>s-o.current.offsetWidth))},[n,T,o]),q=f.useCallback(()=>{T(c??(s=>s+o.current.offsetWidth))},[c,T,o]),M=f.useCallback(()=>{if(l&&z&&o.current&&!W.current){const w=o.current,s=w.scrollLeft;m(v?s<0:s>0),_(Math.abs(A(w))+w.offsetWidth<w.scrollWidth)}},[l,z,o,v]);return f.useEffect(M,[M,t]),G(function(){const s=o.current;if(!s)return J;const j=D=>{o.current.scrollBy({left:D.deltaX+D.deltaY,behavior:"auto"}),D.preventDefault()},N={passive:!1};return e&&s.addEventListener("wheel",j,N),s.addEventListener("scroll",M,N),()=>{e&&s.removeEventListener("wheel",j,N),s.removeEventListener("scroll",M,N)}},[e,M,o]),a.jsxs(B,{...P,baseClassName:y(S.host,"vkuiInternalHorizontalScroll",l==="always"&&S.withConstArrows,v&&S.rtl),onMouseEnter:M,children:[l&&(z||z===void 0)&&r&&a.jsx(H,{"data-testid":L,size:g,offsetY:C,direction:"left","aria-hidden":!0,tabIndex:-1,className:y(S.arrow,S.arrowLeft),onClick:V}),l&&(z||z===void 0)&&d&&a.jsx(H,{"data-testid":h,size:g,offsetY:C,direction:"right","aria-hidden":!0,tabIndex:-1,className:y(S.arrow,S.arrowRight),onClick:q}),a.jsx("div",{className:S.in,ref:o,children:a.jsx(R,{className:y(S.inWrapper,E),ref:i,children:t})})]})},Mt="_host_1zh3x_1",Et="_modeShadow_1zh3x_9",Pt="_modeOutline_1zh3x_18",jt="_modePlain_1zh3x_19",kt="_withBorder_1zh3x_23",k={host:Mt,modeShadow:Et,modeOutline:Pt,modePlain:jt,withBorder:kt},At=({mode:t="tint",Component:n="li",...c})=>{const l=t==="outline"||t==="outline-tint";return a.jsx(B,{...c,Component:n,baseClassName:y(k.host,t==="outline"&&k.modeOutline,t==="shadow"&&k.modeShadow,t==="plain"&&k.modePlain,l&&k.withBorder)})},Tt="_host_f988t_1",Nt="_withPaddings_f988t_23",$={host:Tt,in:"_in_f988t_5",withPaddings:Nt},Bt={s:"vkuiInternalCardScroll--size-s",m:"vkuiInternalCardScroll--size-m",l:"vkuiInternalCardScroll--size-l"},Ot=({children:t,size:n="s",showArrows:c=!0,padding:l=!1,CardsListComponent:g="ul",prevButtonTestId:C,nextButtonTestId:x,...b})=>{const e=f.useRef(null),L=O(),{window:h}=K(),R=r=>parseFloat(h.getComputedStyle(r).getPropertyValue("--vkui_internal--CardScroll_horizontal_padding")),i=r=>{var d;const m=((d=e.current)==null?void 0:d.offsetWidth)||0;return L==="rtl"?m-r.offsetLeft-r.offsetWidth:r.offsetLeft};function E(r){if(!e.current)return r;const m=e.current.offsetWidth,d=o=>{const I=h.getComputedStyle(o);return parseInt(I.marginInlineEnd)||parseInt(L==="rtl"?I.marginLeft:I.marginRight)||0},_=[...e.current.children].findIndex(o=>i(o)+o.offsetWidth+d(o)-r>=0);if(_===-1)return r;const u=e.current.children[_],v=R(e.current),W=i(u)-(m-u.offsetWidth)+v;return W<=2*v?0:W}function P(r){if(!e.current)return r;const m=e.current.offsetWidth,d=Array.prototype.find.call(e.current.children,u=>i(u)+u.offsetWidth-r>m);if(!d)return r;const _=R(e.current);return i(d)-_}return a.jsx(B,{...b,baseClassName:y($.host,"vkuiInternalCardScroll",n!==!1&&Bt[n],l&&$.withPaddings),children:a.jsx(zt,{getScrollToLeft:E,getScrollToRight:P,showArrows:c,prevButtonTestId:C,nextButtonTestId:x,ContentWrapperComponent:g,contentWrapperRef:e,contentWrapperClassName:$.in,children:t})})};export{Ot as C,At as a};
